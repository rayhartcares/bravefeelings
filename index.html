<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brave Feelings Lab</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Fredoka', sans-serif; background-color: #F0F9FF; }
    .hero-bg { background-image: radial-gradient(#bae6fd 2px, transparent 2px); background-size: 30px 30px; }
    .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.12); }

    @keyframes shakeX {
      0% { transform: translateX(0); }
      20% { transform: translateX(-7px); }
      40% { transform: translateX(7px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      100% { transform: translateX(0); }
    }
    .shake { animation: shakeX 0.22s ease-in-out; }
  </style>
</head>

<body class="min-h-screen hero-bg flex flex-col items-center justify-center p-6">

  <!-- LOCK SCREEN -->
  <div id="lockScreen" style="
    position: fixed;
    inset: 0;
    background: #F0F9FF;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 18px;
  ">
    <div id="lockCard" style="
      background: white;
      padding: 34px 28px;
      border-radius: 26px;
      max-width: 440px;
      width: 100%;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.12);
      font-family: 'Fredoka', sans-serif;
      border-bottom: 8px solid #38BDF8;
    ">
      <div style="font-size:54px; margin-bottom: 6px;">ğŸ§¸</div>

      <h2 style="font-size: 28px; font-weight: 900; margin: 0 0 8px 0; color:#0F172A;">
        Welcome to Brave Feelings
      </h2>
      <p style="color:#64748B; font-size:16px; margin: 0 0 18px 0; line-height:1.4;">
        Enter your access code to open the Calm-Down App.
      </p>

      <input
        id="accessInput"
        inputmode="numeric"
        autocomplete="one-time-code"
        placeholder="Access code"
        style="
          width: 100%;
          padding: 14px 14px;
          font-size: 18px;
          border-radius: 16px;
          border: 2px solid #E2E8F0;
          margin-bottom: 14px;
          font-family: 'Fredoka', sans-serif;
          font-weight: 800;
          outline: none;
          text-align: center;
          letter-spacing: 2px;
        "
      />

      <button
        id="unlockBtn"
        type="button"
        style="
          width: 100%;
          padding: 14px 16px;
          border-radius: 18px;
          background: linear-gradient(135deg, #38BDF8, #0EA5E9);
          color: white;
          font-size: 18px;
          font-weight: 900;
          border: none;
          cursor: pointer;
          box-shadow: 0 10px 20px rgba(2,132,199,0.22);
        "
      >
        Open App
      </button>

      <p id="lockError" style="
        color:#DC2626;
        font-weight:900;
        margin-top:14px;
        display:none;
      ">
        Wrong access code. Please try again.
      </p>

      <p style="color:#94A3B8; font-weight:800; margin-top:14px; font-size:13px;">
        Tip: Press Enter after typing your code.
      </p>
    </div>
  </div>

  <!-- MAIN MENU -->
  <div class="text-center max-w-2xl mx-auto mb-12">
    <div class="w-32 h-32 mx-auto mb-6 bg-white rounded-full p-1 shadow-xl">
      <img
        src="assets/benne-hart-avatar.png"
        alt="Benne Hart"
        class="w-full h-full object-cover rounded-full"
        onerror="this.onerror=null; this.src='https://api.dicebear.com/7.x/avataaars/svg?seed=Benne';"
      >
    </div>

    <h1 class="text-5xl md:text-6xl font-extrabold text-slate-800 mb-3">
      Hi, I'm Benne Hart! ğŸ»
    </h1>
    <p class="text-2xl text-slate-600">How is your heart feeling right now?</p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl w-full px-4">

    <a href="./canva.html" class="block bg-white rounded-3xl p-8 border-b-8 border-red-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜¡</span>
        <span class="bg-red-500 text-white px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Angry</h2>
      <p class="text-slate-500 text-lg">I feel like a volcano ready to explode.</p>
    </a>

    <a href="./frustrated.html" class="block bg-white rounded-3xl p-8 border-b-8 border-orange-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜¤</span>
        <span class="bg-orange-100 text-orange-700 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Frustrated</h2>
      <p class="text-slate-500 text-lg">I'm trying hard but it's not working.</p>
    </a>

    <a href="./sad.html" class="block bg-white rounded-3xl p-8 border-b-8 border-blue-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜¢</span>
        <span class="bg-blue-100 text-blue-700 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Sad</h2>
      <p class="text-slate-500 text-lg">I feel heavy, tired, or want to cry.</p>
    </a>

    <a href="./worried.html" class="block bg-white rounded-3xl p-8 border-b-8 border-purple-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜°</span>
        <span class="bg-purple-100 text-purple-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Worried</h2>
      <p class="text-slate-500 text-lg">I have butterflies in my tummy.</p>
    </a>

    <a href="./envious.html" class="block bg-white rounded-3xl p-8 border-b-8 border-green-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜’</span>
        <span class="bg-green-100 text-green-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Envious</h2>
      <p class="text-slate-500 text-lg">I want what someone else has.</p>
    </a>

    <a href="./arrogant.html" class="block bg-white rounded-3xl p-8 border-b-8 border-yellow-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜</span>
        <span class="bg-yellow-100 text-yellow-900 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Arrogant</h2>
      <p class="text-slate-500 text-lg">I feel like I'm better than others.</p>
    </a>

    <a href="./overwhelmed.html" class="block bg-white rounded-3xl p-8 border-b-8 border-sky-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜µâ€ğŸ’«</span>
        <span class="bg-sky-100 text-sky-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Overwhelmed</h2>
      <p class="text-slate-500 text-lg">Too much at onceâ€”my brain needs smaller steps.</p>
    </a>

    <a href="./embarrassed.html" class="block bg-white rounded-3xl p-8 border-b-8 border-pink-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜³</span>
        <span class="bg-pink-100 text-pink-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Embarrassed</h2>
      <p class="text-slate-500 text-lg">My cheeks get hot and I want to hide.</p>
    </a>

    <a href="./shy.html" class="block bg-white rounded-3xl p-8 border-b-8 border-indigo-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜Š</span>
        <span class="bg-indigo-100 text-indigo-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Shy</h2>
      <p class="text-slate-500 text-lg">I want to talk, but my body feels nervous.</p>
    </a>

    <a href="./scared.html" class="block bg-white rounded-3xl p-8 border-b-8 border-violet-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">ğŸ˜¨</span>
        <span class="bg-violet-100 text-violet-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Scared</h2>
      <p class="text-slate-500 text-lg">My body thinks something bad might happen.</p>
    </a>

  </div>

  <div class="mt-10 text-center">
    <button
      id="clearAccessBtn"
      class="text-slate-500 font-extrabold text-sm underline decoration-slate-300 hover:text-slate-700"
      type="button"
    >
      Clear Saved Access (force password prompt)
    </button>
  </div>

  <div class="mt-10 text-slate-400 font-extrabold text-sm text-center">
    Brave Feelings Lab Â© 2025
  </div>

 <script>
  /* ============================
     1-HOUR LOGIN SESSION (AUTO-LOGOUT)
     ============================ */

  const ACCESS_CODE = "5511";            // change password here
  const SESSION_MS  = 60 * 60 * 1000;    // 1 hour

  // New session storage key
  const SESSION_KEY = "bf_access_session_v1";

  // Legacy cleanup (from your previous version)
  const LEGACY_KEY  = "bf_access_token_v1";

  function normalizeCode(s){
    return (s || "").toString().replace(/\D+/g, "");
  }

  function expectedToken(){
    return "ok:" + normalizeCode(ACCESS_CODE);
  }

  function showLock(show){
    const lock = document.getElementById("lockScreen");
    if(!lock) return;
    lock.style.display = show ? "flex" : "none";
  }

  function showError(show){
    const err = document.getElementById("lockError");
    if(!err) return;
    err.style.display = show ? "block" : "none";
  }

  function shakeCard(){
    const card = document.getElementById("lockCard");
    if(!card) return;
    card.classList.remove("shake");
    void card.offsetWidth;
    card.classList.add("shake");
    setTimeout(() => card.classList.remove("shake"), 260);
  }

  function clearSession(){
    localStorage.removeItem(SESSION_KEY);
  }

  function saveSession(){
    const payload = {
      token: expectedToken(),
      exp: Date.now() + SESSION_MS
    };
    localStorage.setItem(SESSION_KEY, JSON.stringify(payload));
    return payload;
  }

  function loadSession(){
    try{
      const raw = localStorage.getItem(SESSION_KEY);
      if(!raw) return null;
      const data = JSON.parse(raw);
      if(!data || typeof data.exp !== "number" || typeof data.token !== "string") return null;
      return data;
    }catch{
      return null;
    }
  }

  function sessionIsValid(data){
    if(!data) return false;
    if(data.token !== expectedToken()) return false;  // password changed => invalid
    if(Date.now() >= data.exp) return false;          // expired
    return true;
  }

  function focusInputSoon(){
    const input = document.getElementById("accessInput");
    setTimeout(() => input && input.focus(), 60);
  }

  function lockNow(){
    clearSession();
    showLock(true);
    showError(false);
    const input = document.getElementById("accessInput");
    if(input) input.value = "";
    focusInputSoon();
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  let logoutTimer = null;

  function armAutoLogout(exp){
    if(logoutTimer) clearTimeout(logoutTimer);
    const remaining = exp - Date.now();
    if(remaining <= 0){
      lockNow();
      return;
    }
    logoutTimer = setTimeout(() => {
      lockNow();
    }, remaining);
  }

  function unlockApp(){
    const input = document.getElementById("accessInput");
    const typed = normalizeCode(input?.value);
    const expected = normalizeCode(ACCESS_CODE);

    if(typed && typed === expected){
      showError(false);
      showLock(false);
      const session = saveSession();
      armAutoLogout(session.exp);
    }else{
      showError(true);
      shakeCard();
    }
  }

  function enforceGate(){
    // prevent â€œflashâ€ of unlocked content while we decide
    document.documentElement.style.visibility = "hidden";

    // clean old token from previous version so it never interferes
    localStorage.removeItem(LEGACY_KEY);

    const session = loadSession();

    if(sessionIsValid(session)){
      showLock(false);
      showError(false);
      armAutoLogout(session.exp);
    }else{
      lockNow();
    }

    document.documentElement.style.visibility = "visible";
  }

  document.addEventListener("DOMContentLoaded", () => {
    // wire buttons
    const unlockBtn = document.getElementById("unlockBtn");
    if(unlockBtn) unlockBtn.addEventListener("click", unlockApp);

    const clearBtn = document.getElementById("clearAccessBtn");
    if(clearBtn) clearBtn.addEventListener("click", lockNow);

    const input = document.getElementById("accessInput");
    if(input){
      input.addEventListener("input", () => showError(false));
      input.addEventListener("keydown", (e) => {
        if(e.key === "Enter") unlockApp();
      });
    }

    enforceGate();
  });

  // If the tab was left open and comes back, re-check expiry
  window.addEventListener("focus", enforceGate);

  // If browser restores from back/forward cache, re-check expiry
  window.addEventListener("pageshow", () => enforceGate);
</script>


</body>
</html>
