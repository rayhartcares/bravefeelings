<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Understanding Sadness</title>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0; padding: 0;
      background: #F4FAFF;
      font-family: 'Fredoka', sans-serif;
      color: #1F2937;
      display: flex; justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    #app-container {
      width: 100%;
      max-width: 860px;
      padding: 44px 18px;
      position: relative;
    }

    .white-card {
      background: white;
      border-radius: 26px;
      padding: 30px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.06);
      text-align: center;
      margin-bottom: 24px;
      border-bottom: 7px solid #E5E7EB;
      position: relative;
      overflow: visible;
      transition: transform .18s ease;
    }
    .white-card:hover { transform: translateY(-4px); }

    .title {
      font-size: 40px;
      font-weight: 800;
      text-align: center;
      margin: 0 0 8px 0;
      letter-spacing: .2px;
      color: #0F172A;
    }
    .subtitle {
      text-align: center;
      color: #64748B;
      margin: 0 0 34px 0;
      font-size: 18px;
      line-height: 1.45;
    }
    .blue-title { color: #2563EB; }

    .card-title {
      font-size: 22px;
      font-weight: 800;
      margin: 10px 0 6px 0;
      color: #0F172A;
    }
    .card-desc {
      font-size: 16px;
      color: #64748B;
      line-height: 1.55;
      margin: 0;
    }

    .btn {
      padding: 14px 22px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 18px;
      border: none;
      cursor: pointer;
      color: white;
      transition: transform .2s ease, filter .2s ease;
      width: 100%;
      margin-top: 16px;
      box-shadow: 0 7px 16px rgba(0,0,0,0.12);
    }
    .btn:hover { transform: scale(1.02); filter: brightness(1.06); }
    .btn:disabled { opacity: .75; cursor: not-allowed; transform: none; }

    .btn-blue   { background: linear-gradient(135deg, #3B82F6, #2563EB); }
    .btn-sky    { background: linear-gradient(135deg, #38BDF8, #0EA5E9); }
    .btn-teal   { background: linear-gradient(135deg, #2DD4BF, #0D9488); }
    .btn-amber  { background: linear-gradient(135deg, #FBBF24, #D97706); }
    .btn-rose   { background: linear-gradient(135deg, #FB7185, #E11D48); }
    .btn-indigo { background: linear-gradient(135deg, #6366F1, #4338CA); }

    .btn-back {
      background: white;
      border: 2px solid #CBD5E1;
      color: #334155;
      padding: 9px 16px;
      border-radius: 14px;
      font-weight: 800;
      cursor: pointer;
      margin-bottom: 18px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 22px;
    }
    @media (max-width: 650px) { .grid-2 { grid-template-columns: 1fr; } }

    /* Existing emoji stickers */
    .sticker-img {
      width: clamp(118px, 32vw, 160px);
      height: clamp(118px, 32vw, 160px);
      object-fit: contain;
      filter: drop-shadow(0 16px 18px rgba(0,0,0,0.16));
      user-select: none;
      -webkit-user-drag: none;
    }

    /* General animations */
    @keyframes floaty { 0%,100%{ transform: translateY(0) scale(1); } 50%{ transform: translateY(-14px) scale(1.05); } }
    @keyframes wobble { 0%{ transform: rotate(0deg) } 25%{ transform: rotate(6deg) } 50%{ transform: rotate(0deg) } 75%{ transform: rotate(-6deg) } 100%{ transform: rotate(0deg) } }
    @keyframes boing  { 0%,100%{ transform: scale(1) } 50%{ transform: scale(1.18) } }
    @keyframes glow   { 0%,100%{ filter: drop-shadow(0 16px 18px rgba(0,0,0,0.16)) } 50%{ filter: drop-shadow(0 0 24px rgba(59,130,246,.55)) } }

    .floaty { animation: floaty 2.6s infinite ease-in-out; }
    .wobble { animation: wobble 0.9s infinite ease-in-out; }
    .boing  { animation: boing 1.1s infinite ease-in-out; }
    .glow   { animation: glow 1.6s infinite ease-in-out; }

    .bubble {
      display: none;
      background: #EFF6FF;
      border: 2px solid #BFDBFE;
      color: #1E40AF;
      padding: 14px 14px;
      border-radius: 18px;
      font-weight: 800;
      margin-top: 12px;
    }

    .pill {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      font-weight: 800;
      font-size: 13px;
      margin-top: 10px;
      background: #E0F2FE;
      color: #075985;
    }

    .mini-panel {
      background: #F8FAFC;
      border: 2px dashed #CBD5E1;
      border-radius: 18px;
      padding: 14px;
      margin-top: 12px;
      text-align: center;
    }

    .timer {
      font-size: 34px;
      font-weight: 900;
      margin-top: 10px;
      color: #0F172A;
      min-height: 44px;
    }

    /* Bright Spot beam toggle */
    .beam {
      position: absolute;
      left: 50%;
      top: 110px;
      transform: translateX(-50%);
      width: 340px;
      height: 210px;
      background: radial-gradient(circle at top, rgba(253,224,71,0.75), rgba(253,224,71,0.0) 70%);
      border-radius: 50%;
      filter: blur(2px);
      opacity: 0;
      pointer-events: none;
      transition: opacity .22s ease;
    }
    .beam.on { opacity: 1; }

    /* ---------- 3D ILLUSTRATIONS ---------- */
    .illus3d {
      width: 210px;
      height: 170px;
      margin: 0 auto 6px auto;
      position: relative;
      display: flex;
      align-items: center;
      justify-content: center;
      filter: drop-shadow(0 18px 18px rgba(0,0,0,0.16));
    }

    /* WARM SQUEEZE (kept as-is, already good) */
    @keyframes pillow-squish {
      0%,100% { transform: scale(1); }
      40% { transform: scale(1.06, 0.92); }
      70% { transform: scale(0.98, 1.04); }
    }
    @keyframes hug-arms {
      0%,100% { transform: translateX(0) rotate(0deg); }
      50% { transform: translateX(8px) rotate(10deg); }
    }
    @keyframes heart-pop {
      0%,70% { transform: translateY(10px) scale(0); opacity: 0; }
      85% { transform: translateY(-6px) scale(1.2); opacity: 1; }
      100% { transform: translateY(-16px) scale(1); opacity: 0; }
    }

    .pillow {
      width: 150px;
      height: 120px;
      border-radius: 30px;
      background: linear-gradient(135deg, #FFD1DC, #FF4D6D);
      box-shadow: inset 0 10px 18px rgba(255,255,255,0.35), inset 0 -10px 18px rgba(0,0,0,0.12);
      position: relative;
      animation: pillow-squish 1.25s infinite ease-in-out;
    }
    .pillow:before, .pillow:after {
      content: "";
      position: absolute;
      width: 44px;
      height: 30px;
      background: linear-gradient(135deg, #FFC0CB, #FF2F5A);
      border-radius: 18px;
      top: 58px;
      box-shadow: inset 0 6px 10px rgba(255,255,255,0.25);
      animation: hug-arms 1.25s infinite ease-in-out;
    }
    .pillow:before { left: -12px; transform-origin: right center; }
    .pillow:after  { right: -12px; transform-origin: left center; animation-delay: .12s; }

    .pillow-face {
      position: absolute;
      inset: 0;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 10px;
      flex-direction: column;
    }
    .pillow-eyes { display: flex; gap: 14px; margin-top: 10px; }
    .eye {
      width: 10px; height: 10px;
      background: rgba(15,23,42,0.75);
      border-radius: 50%;
      box-shadow: 0 2px 0 rgba(255,255,255,0.15);
    }
    .smile {
      width: 34px; height: 18px;
      border: 4px solid rgba(15,23,42,0.55);
      border-top: 0;
      border-left: 0;
      border-right: 0;
      border-radius: 0 0 20px 20px;
      margin-bottom: 6px;
      opacity: .9;
    }
    .heart {
      position: absolute;
      width: 18px; height: 18px;
      left: 50%;
      top: 22px;
      transform: translateX(-50%);
      background: #FFF;
      border-radius: 5px;
      clip-path: polygon(50% 85%, 95% 45%, 78% 18%, 50% 32%, 22% 18%, 5% 45%);
      animation: heart-pop 1.25s infinite ease-in-out;
      opacity: .9;
    }

    /* ==============================
       BRIGHT SPOT (UPGRADED: SUPER BRIGHT + GLITTER)
       ============================== */

    @keyframes spot-sway { 0%,100%{ transform: rotate(-7deg); } 50%{ transform: rotate(7deg); } }
    @keyframes mega-glow {
      0%,100% { filter: drop-shadow(0 0 0 rgba(253,224,71,0)); }
      50% { filter: drop-shadow(0 0 34px rgba(253,224,71,0.95)); }
    }
    @keyframes star-pulse {
      0%,100% { transform: translateX(-50%) scale(1); }
      50% { transform: translateX(-50%) scale(1.22); }
    }
    @keyframes sparkle-twinkle {
      0%,100% { transform: scale(0.6) rotate(0deg); opacity: 0.15; }
      50% { transform: scale(1.55) rotate(25deg); opacity: 1; }
    }
    @keyframes glitter-pop {
      0% { transform: translate(-50%, -50%) scale(0.2); opacity: 0; }
      20% { transform: translate(-50%, -50%) scale(1.0); opacity: 1; }
      100% { transform: translate(-50%, -50%) scale(1.7); opacity: 0; }
    }

    .brightRig {
      width: 190px;
      height: 160px;
      position: relative;
      animation: spot-sway 2.2s infinite ease-in-out;
    }
    .brightRig .lampCap {
      width: 44px; height: 44px;
      border-radius: 16px;
      background: linear-gradient(135deg, #E2E8F0, #94A3B8);
      box-shadow: inset 0 8px 14px rgba(255,255,255,0.35), inset 0 -8px 14px rgba(0,0,0,0.12);
      position: absolute;
      left: 50%; top: 0;
      transform: translateX(-50%);
    }
    .brightRig .lampHead {
      width: 66px; height: 34px;
      border-radius: 999px;
      background: linear-gradient(135deg, #F8FAFC, #CBD5E1);
      box-shadow: inset 0 8px 14px rgba(255,255,255,0.42), inset 0 -8px 12px rgba(0,0,0,0.10);
      position: absolute;
      left: 50%; top: 30px;
      transform: translateX(-50%);
    }
    .brightRig .cone {
      position: absolute;
      left: 50%; top: 52px;
      transform: translateX(-50%);
      width: 0; height: 0;
      border-left: 78px solid transparent;
      border-right: 78px solid transparent;
      border-top: 105px solid rgba(253,224,71,0.35);
      filter: blur(0.2px);
      opacity: 0.25;
      transition: opacity .2s ease;
    }
    .brightRig .star {
      position: absolute;
      left: 50%; top: 92px;
      transform: translateX(-50%);
      width: 52px; height: 52px;
      background: linear-gradient(135deg, #FFF7B2, #F59E0B);
      clip-path: polygon(50% 0%, 62% 34%, 98% 35%, 69% 57%, 80% 92%, 50% 72%, 20% 92%, 31% 57%, 2% 35%, 38% 34%);
      border-radius: 12px;
      box-shadow: inset 0 12px 18px rgba(255,255,255,0.42), inset 0 -12px 18px rgba(0,0,0,0.14);
      transition: filter .2s ease;
    }
    .brightRig .sparkle {
      position: absolute;
      width: 10px; height: 10px;
      background: rgba(253,224,71,0.95);
      border-radius: 4px;
      box-shadow: 0 0 18px rgba(253,224,71,0.9);
      opacity: .2;
      animation: sparkle-twinkle 1.2s infinite ease-in-out;
    }
    .s1 { left: 18px; top: 118px; animation-delay: .05s; }
    .s2 { left: 52px; top: 96px;  animation-delay: .22s; }
    .s3 { right: 50px; top: 92px; animation-delay: .12s; }
    .s4 { right: 22px; top: 118px; animation-delay: .30s; }
    .s5 { left: 88px; top: 132px; animation-delay: .18s; }

    /* When ON: make it REALLY bright + glitter */
    #bright-art.on .cone { opacity: 1; border-top-color: rgba(253,224,71,0.62); }
    #bright-art.on .star {
      animation: star-pulse 0.95s infinite ease-in-out, mega-glow 0.95s infinite ease-in-out;
      filter: drop-shadow(0 0 35px rgba(253,224,71,0.95));
    }
    #bright-art.on .sparkle { opacity: 1; }

    /* Pop burst glitter (created by JS) */
    .glitterBurst {
      position: absolute;
      left: 50%;
      top: 112px;
      width: 18px; height: 18px;
      background: rgba(253,224,71,0.95);
      border-radius: 6px;
      box-shadow: 0 0 24px rgba(253,224,71,0.9);
      animation: glitter-pop .9s ease-out forwards;
      pointer-events: none;
    }

   /* ==============================
   BOX BREATH (NEW: 3D CARTOON LUNGS + AIR PUFFS)
   ============================== */

@keyframes lungs-float {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-10px); }
}
@keyframes lungs-wiggle {
  0%,100% { transform: translateY(0) rotate(0deg); }
  50% { transform: translateY(-2px) rotate(1deg); }
}

@keyframes puff-up {
  0%   { transform: translateY(18px) scale(0.6); opacity: 0; }
  20%  { opacity: .8; }
  100% { transform: translateY(-40px) scale(1.6); opacity: 0; }
}
@keyframes puff-down {
  0%   { transform: translateY(-18px) scale(0.6); opacity: 0; }
  20%  { opacity: .8; }
  100% { transform: translateY(38px) scale(1.6); opacity: 0; }
}

.lungsWrap {
  width: 210px;
  height: 170px;
  position: relative;
  display: grid;
  place-items: center;
  animation: lungs-float 2.2s infinite ease-in-out;
  filter: drop-shadow(0 18px 18px rgba(0,0,0,0.16));
}

/* Air tube */
.airTube {
  position: absolute;
  top: 16px;
  width: 46px;
  height: 64px;
  border-radius: 22px;
  background: linear-gradient(135deg, #E2E8F0, #94A3B8);
  box-shadow: inset 0 10px 18px rgba(255,255,255,0.35),
              inset 0 -10px 18px rgba(0,0,0,0.12);
}
.airTube::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 44px;
  transform: translateX(-50%);
  width: 66px;
  height: 20px;
  border-radius: 999px;
  background: linear-gradient(135deg, #F8FAFC, #CBD5E1);
  box-shadow: inset 0 8px 12px rgba(255,255,255,0.35),
              inset 0 -8px 12px rgba(0,0,0,0.10);
}

/* Lungs body */
.lungs {
  position: absolute;
  top: 58px;
  width: 190px;
  height: 108px;
  display: flex;
  justify-content: center;
  gap: 12px;
  pointer-events: none;
}

.lung {
  width: 84px;
  height: 104px;
  border-radius: 48% 52% 60% 40% / 55% 55% 45% 45%;
  background: linear-gradient(135deg, #C7D2FE, #38BDF8);
  box-shadow: inset 0 16px 26px rgba(255,255,255,0.45),
              inset 0 -18px 24px rgba(0,0,0,0.14);
  position: relative;
  transform: scale(0.98);
  transition: transform .55s ease, filter .55s ease;
}

.lung::before {
  content: "";
  position: absolute;
  left: 14px;
  top: 16px;
  width: 22px;
  height: 46px;
  border-radius: 999px;
  background: rgba(255,255,255,0.28);
  transform: rotate(-10deg);
}

.lung.left  { transform-origin: 70% 50%; }
.lung.right { transform-origin: 30% 50%; }

/* cute “bounce lines” ribs */
.ribs {
  position: absolute;
  bottom: 20px;
  left: 50%;
  transform: translateX(-50%);
  width: 56px;
  height: 26px;
  border-radius: 999px;
  box-shadow:
    0 8px 0 rgba(15,23,42,0.08),
    0 16px 0 rgba(15,23,42,0.06);
  opacity: 0.55;
}

/* Air puffs */
.airFlow {
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  width: 120px;
  height: 120px;
  pointer-events: none;
  opacity: 0;
  transition: opacity .2s ease;
}
.airIn  { top: 18px; }
.airOut { top: 68px; }

.puff {
  position: absolute;
  width: 14px; height: 14px;
  border-radius: 6px;
  background: rgba(255,255,255,0.85);
  box-shadow: 0 0 18px rgba(56,189,248,0.35);
  opacity: 0;
}
.p1 { left: 16px; }
.p2 { left: 52px; }
.p3 { left: 88px; }

/* Phase behavior */
.lungsWrap.inhale .lung {
  transform: scale(1.22);
  filter: drop-shadow(0 0 22px rgba(56,189,248,0.55));
}
.lungsWrap.hold .lungs { animation: lungs-wiggle 1.0s infinite ease-in-out; }
.lungsWrap.exhale .lung {
  transform: scale(0.86);
  filter: drop-shadow(0 0 10px rgba(56,189,248,0.25));
}

/* Show puffs on inhale/exhale */
.lungsWrap.inhale .airIn  { opacity: 1; }
.lungsWrap.exhale .airOut { opacity: 1; }

/* Animate puffs */
.lungsWrap.inhale .airIn .puff {
  animation: puff-up .85s ease-out infinite;
}
.lungsWrap.inhale .airIn .p2 { animation-delay: .12s; }
.lungsWrap.inhale .airIn .p3 { animation-delay: .24s; }

.lungsWrap.exhale .airOut .puff {
  animation: puff-down .85s ease-out infinite;
}
.lungsWrap.exhale .airOut .p2 { animation-delay: .12s; }
.lungsWrap.exhale .airOut .p3 { animation-delay: .24s; }

</head>

<body>
  <div id="app-container"></div>

  <script>
    const container = document.getElementById('app-container');

    const BASE = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/";
    const EMOJI = {
      heavy: BASE + "Smilies/Loudly%20Crying%20Face.png",
      tools: BASE + "Smilies/Relieved%20Face.png",

      quiet: BASE + "Smilies/Face%20Without%20Mouth.png",
      cry:   BASE + "Smilies/Crying%20Face.png",
      stop:  BASE + "Smilies/Weary%20Face.png",
      hide:  BASE + "People/Person%20Bowing.png",

      fog:   BASE + "Smilies/Dizzy%20Face.png",
      joy:   BASE + "Smilies/Cloud.png",
      heavyB:BASE + "Smilies/Sleepy%20Face.png",
      lonely:BASE + "Smilies/Disappointed%20Face.png",

      comfort: BASE + "People/People%20Hugging.png",
      label:   BASE + "Objects/Memo.png",
      step:    BASE + "People/Person%20Walking.png"
    };

    function safeImg(src, cls, fallback){
      return `<img src="${src}" class="sticker-img ${cls || ""}"
        onerror="this.onerror=null; this.src='${fallback || EMOJI.tools}';">`;
    }

    function showHome(){
      container.innerHTML = `
        <h1 class="title">Understanding Sadness</h1>
        <p class="subtitle">Sadness feels heavy. Let’s make it lighter—step by step.</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#38BDF8;">
            ${safeImg(EMOJI.heavy, "floaty")}
            <div class="card-title">The Heavy Feeling</div>
            <p class="card-desc">“I feel low… and everything feels hard.”</p>
            <button class="btn btn-sky" onclick="showReactions()">See Behaviors</button>
          </div>

          <div class="white-card" style="border-bottom-color:#2563EB;">
            ${safeImg(EMOJI.tools, "floaty glow")}
            <div class="card-title">Comfort Tools</div>
            <p class="card-desc">Science-backed ways to feel steadier.</p>
            <button class="btn btn-blue" onclick="showSolutions()">Show Comfort Tools</button>
          </div>
        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">← Back to Menu</a>
        </div>
      `;
    }

    function showReactions(){
      container.innerHTML = `
        <button class="btn-back" onclick="showHome()">← Back</button>
        <h1 class="title blue-title">How Do I Act When I’m Sad?</h1>
        <p class="subtitle" style="color:#2563EB; font-weight:800;">These reactions are signals that you need care.</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#93C5FD;">
            ${safeImg(EMOJI.quiet, "floaty")}
            <div class="card-title">I Go Quiet</div>
            <p class="card-desc">I don’t want to talk or move.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#93C5FD;">
            ${safeImg(EMOJI.cry, "boing")}
            <div class="card-title">I Want to Cry</div>
            <p class="card-desc">Tears show I need comfort.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#93C5FD;">
            ${safeImg(EMOJI.stop, "wobble")}
            <div class="card-title">I Stop Trying</div>
            <p class="card-desc">I feel like giving up.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#93C5FD;">
            ${safeImg(EMOJI.hide, "floaty")}
            <div class="card-title">I Hide Away</div>
            <p class="card-desc">I want to be alone.</p>
          </div>
        </div>

        <div class="white-card" style="margin-top:26px; border-bottom-color:#2563EB;">
          <p style="font-weight:900; font-size:20px; color:#1E40AF; margin:0;">What happens if I stay stuck like this?</p>
          <button class="btn btn-blue" style="width:auto; margin-top:14px;" onclick="showConsequences()">See Consequences ➔</button>
        </div>
      `;
    }

    function showConsequences(){
      container.innerHTML = `
        <button class="btn-back" onclick="showReactions()">← Back</button>
        <h1 class="title blue-title">When Sadness Stays Too Long…</h1>
        <p class="subtitle">It can pull energy away from thinking, playing, and connecting.</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#60A5FA;">
            ${safeImg(EMOJI.fog, "wobble")}
            <div class="card-title">Brain Fog</div>
            <p class="card-desc">Hard to focus or decide.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#60A5FA;">
            ${safeImg(EMOJI.joy, "floaty")}
            <div class="card-title">Less Joy</div>
            <p class="card-desc">Fun feels far away.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#60A5FA;">
            ${safeImg(EMOJI.heavyB, "floaty")}
            <div class="card-title">Heavy Body</div>
            <p class="card-desc">Everything feels slow.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#60A5FA;">
            ${safeImg(EMOJI.lonely, "boing")}
            <div class="card-title">Lonely Feeling</div>
            <p class="card-desc">I need safe connection.</p>
          </div>
        </div>

        <div class="white-card" style="margin-top:26px; border-bottom-color:#22C55E;">
          <p style="font-weight:900; font-size:20px; color:#166534; margin:0;">Good news: comfort tools can lift the weight.</p>
          <button class="btn btn-teal" style="width:auto; margin-top:14px;" onclick="showSolutions()">Go to Comfort Tools ➔</button>
        </div>
      `;
    }

    function showSolutions(){
      container.innerHTML = `
        <button class="btn-back" onclick="showHome()">← Back to Start</button>
        <h1 class="title blue-title">Comfort Tools</h1>
        <p class="subtitle">Each tool looks like what it does—so kids understand instantly.</p>

        <div style="display:flex; flex-direction:column; gap:26px; margin-top:18px;">

          <!-- TOOL 1 -->
          <div class="white-card" style="border-bottom-color:#2563EB;">
            ${safeImg(EMOJI.comfort, "floaty glow", EMOJI.tools)}
            <div class="card-title" style="color:#2563EB;">Ask for Comfort</div>
            <p class="card-desc">Connection helps the brain feel safer. Ask for a small comfort, not a big fix.</p>
            <div id="comfort-bubble" class="bubble">“Can I have a hug, or can you sit with me for one minute?”</div>
            <button class="btn btn-blue" onclick="toggleComfort()">Practice Asking</button>
          </div>

          <!-- TOOL 2 -->
          <div class="white-card" style="border-bottom-color:#0D9488;">
            ${safeImg(EMOJI.label, "boing", EMOJI.tools)}
            <div class="card-title" style="color:#0D9488;">Name It</div>
            <p class="card-desc">Putting feelings into words helps your brain calm down and think clearer.</p>
            <div class="mini-panel">
              <div class="pill" id="label-pill">Sad</div>
              <div style="font-weight:900; font-size:18px; margin-top:10px;" id="label-line">“I feel sad.”</div>
              <div style="color:#64748B; margin-top:6px;" id="label-help">Try a closer word.</div>
            </div>
            <button class="btn btn-teal" onclick="cycleLabel()">Try Another Word</button>
          </div>

          <!-- TOOL 3 -->
          <div class="white-card" style="border-bottom-color:#D97706; position:relative;">
            ${safeImg(EMOJI.step, "floaty", EMOJI.tools)}
            <div class="card-title" style="color:#D97706;">One Tiny Step</div>
            <p class="card-desc">A small action can gently lift mood (behavioral activation).</p>
            <div class="timer" id="step-timer"></div>
            <button class="btn btn-amber" id="step-btn" onclick="startTinyStep()">Do 20 Seconds</button>
            <div class="mini-panel" id="step-idea" style="display:none;">
              Tiny step ideas: drink water, stand up, open the window, put one toy away.
            </div>
          </div>

          <!-- TOOL 4 -->
          <div class="white-card" style="border-bottom-color:#E11D48;">
            <div class="illus3d">
              <div class="pillow">
                <div class="heart"></div>
                <div class="pillow-face">
                  <div class="pillow-eyes">
                    <div class="eye"></div><div class="eye"></div>
                  </div>
                  <div class="smile"></div>
                </div>
              </div>
            </div>
            <div class="card-title" style="color:#E11D48;">Warm Squeeze</div>
            <p class="card-desc">A safe hug or squeeze pillow can help your body settle.</p>
            <div class="mini-panel" id="squeeze-msg" style="display:none;">
              Squeeze for 5…4…3…2…1. Now soften your shoulders.
            </div>
            <button class="btn btn-rose" onclick="doSqueeze()">Squeeze Power</button>
          </div>

          <!-- TOOL 5 (BRIGHT SPOT: NOW EXTRA BRIGHT + GLITTER) -->
          <div class="white-card" style="border-bottom-color:#4338CA; position:relative;">
            <div class="beam" id="beam"></div>

            <div class="illus3d" id="bright-art">
              <div class="brightRig">
                <div class="lampCap"></div>
                <div class="lampHead"></div>
                <div class="cone"></div>
                <div class="star"></div>
                <div class="sparkle s1"></div>
                <div class="sparkle s2"></div>
                <div class="sparkle s3"></div>
                <div class="sparkle s4"></div>
                <div class="sparkle s5"></div>
              </div>
            </div>

            <div class="card-title" style="color:#4338CA;">Find a Bright Spot</div>
            <p class="card-desc">Find one small good thing—just to balance the heavy feeling.</p>
            <div class="mini-panel" id="bright-panel" style="display:none;">
              1) Something good I saw: ________ <br>
              2) Someone kind to me: ________ <br>
              3) One thing I can do next: ________
            </div>
            <button class="btn btn-indigo" onclick="toggleBright()">Turn On Bright Spot</button>
          </div>

         <!-- TOOL 6 (BOX BREATH: NEW 3D LUNGS) -->
<div class="white-card" style="border-bottom-color:#0EA5E9;">
  <div class="illus3d">
    <div class="lungsWrap" id="lungsWrap">
      <div class="airTube"></div>

      <div class="lungs">
        <div class="lung left">
          <div class="ribs"></div>
        </div>
        <div class="lung right">
          <div class="ribs"></div>
        </div>
      </div>

      <div class="airFlow airIn">
        <div class="puff p1"></div>
        <div class="puff p2"></div>
        <div class="puff p3"></div>
      </div>

      <div class="airFlow airOut">
        <div class="puff p1"></div>
        <div class="puff p2"></div>
        <div class="puff p3"></div>
      </div>
    </div>
  </div>

  <div class="card-title" style="color:#0EA5E9;">Box Breath</div>
  <p class="card-desc">Slow breathing helps your nervous system downshift.</p>

  <div class="mini-panel">
    <div class="pill" id="box-phase">In</div>
    <div style="font-weight:900; font-size:22px; margin-top:10px;" id="box-count">4</div>
    <div style="color:#64748B; margin-top:6px;" id="box-help">Breathe in slowly.</div>
  </div>

  <button class="btn btn-sky" id="box-btn" onclick="toggleBoxBreath()">Start Box Breath</button>
</div>

        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">← Back to Menu</a>
        </div>
      `;

      resetStates();
    }

    function toggleComfort(){
      const b = document.getElementById('comfort-bubble');
      if(!b) return;
      b.style.display = (b.style.display === 'block') ? 'none' : 'block';
    }

    const labels = [
      { word:"Sad", line:"“I feel sad.”", help:"Try a closer word." },
      { word:"Lonely", line:"“I feel lonely.”", help:"Maybe I need connection." },
      { word:"Disappointed", line:"“I feel disappointed.”", help:"Something didn’t go how I hoped." },
      { word:"Hurt", line:"“I feel hurt.”", help:"My feelings got bumped." },
      { word:"Tired", line:"“I feel tired.”", help:"Rest can help feelings too." }
    ];
    let labelIndex = 0;
    function cycleLabel(){
      const pill = document.getElementById('label-pill');
      const line = document.getElementById('label-line');
      const help = document.getElementById('label-help');
      if(!pill || !line || !help) return;
      labelIndex = (labelIndex + 1) % labels.length;
      pill.textContent = labels[labelIndex].word;
      line.textContent = labels[labelIndex].line;
      help.textContent = labels[labelIndex].help;
    }

    let stepInterval = null;
    function startTinyStep(){
      const timer = document.getElementById('step-timer');
      const btn = document.getElementById('step-btn');
      const idea = document.getElementById('step-idea');
      if(!timer || !btn || !idea) return;
      if(stepInterval) return;

      let t = 20;
      timer.textContent = t;
      idea.style.display = 'block';
      btn.disabled = true;
      btn.textContent = "Doing it...";

      stepInterval = setInterval(() => {
        t--;
        timer.textContent = t;
        if(t <= 0){
          clearInterval(stepInterval);
          stepInterval = null;
          timer.textContent = "Nice!";
          btn.disabled = false;
          btn.textContent = "Do 20 Seconds Again";
        }
      }, 1000);
    }

    function doSqueeze(){
      const msg = document.getElementById('squeeze-msg');
      if(!msg) return;
      msg.style.display = 'block';
      setTimeout(() => { msg.style.display = 'none'; }, 2600);
    }

    // BRIGHT SPOT: now toggles mega bright + glitter burst
    function toggleBright(){
      const panel = document.getElementById('bright-panel');
      const beam  = document.getElementById('beam');
      const art   = document.getElementById('bright-art');
      if(!panel) return;

      const on = (panel.style.display !== 'block');
      panel.style.display = on ? 'block' : 'none';
      if(beam) beam.classList.toggle('on', on);
      if(art) art.classList.toggle('on', on);

      // Glitter burst when turning ON
      if(on && art){
        for(let i=0; i<7; i++){
          setTimeout(() => {
            const g = document.createElement('div');
            g.className = 'glitterBurst';
            // random burst around the star zone
            const x = 90 + (Math.random()*60 - 30);
            const y = 90 + (Math.random()*40 - 20);
            g.style.left = x + 'px';
            g.style.top  = y + 'px';
            art.appendChild(g);
            setTimeout(() => g.remove(), 900);
          }, i * 70);
        }
      }
    }

    let boxRunning = false;
    let boxTimer = null;
    const boxPhases = [
      { phase:"In",   help:"Breathe in slowly." },
      { phase:"Hold", help:"Hold gently." },
      { phase:"Out",  help:"Breathe out slowly." },
      { phase:"Hold", help:"Hold gently." }
    ];
    let boxPhaseIndex = 0;
    let boxCount = 4;

    function toggleBoxBreath(){
      const phaseEl = document.getElementById('box-phase');
      const countEl = document.getElementById('box-count');
      const helpEl  = document.getElementById('box-help');
      const btn     = document.getElementById('box-btn');
     const wrap    = document.getElementById('lungsWrap');

      if(!phaseEl || !countEl || !helpEl || !btn) return;

      if(boxRunning){
        clearInterval(boxTimer);
        boxTimer = null;
        boxRunning = false;
        btn.textContent = "Start Box Breath";
        phaseEl.textContent = "In";
        countEl.textContent = "4";
        helpEl.textContent  = "Breathe in slowly.";
        boxPhaseIndex = 0; boxCount = 4;
        if(wrap) wrap.className = "balloonWrap";
        return;
      }

      boxRunning = true;
      btn.textContent = "Stop Box Breath";
      applyBoxPhase();

      boxTimer = setInterval(() => {
        boxCount--;
        countEl.textContent = boxCount;
        if(boxCount <= 0){
          boxPhaseIndex = (boxPhaseIndex + 1) % boxPhases.length;
          boxCount = 4;
          applyBoxPhase();
        }
      }, 1000);

      function applyBoxPhase(){
        const p = boxPhases[boxPhaseIndex];
        phaseEl.textContent = p.phase;
        helpEl.textContent  = p.help;
        countEl.textContent = boxCount;

        // Drive balloon exaggeration
        if(wrap){
          wrap.classList.remove('inhale','exhale','hold');
          if(p.phase === "In") wrap.classList.add('inhale');
          else if(p.phase === "Out") wrap.classList.add('exhale');
          else wrap.classList.add('hold');
        }
      }
    }

    function resetStates(){
      labelIndex = 0;
      if(boxTimer){ clearInterval(boxTimer); boxTimer = null; }
      boxRunning = false;
      boxPhaseIndex = 0; boxCount = 4;
      if(stepInterval){ clearInterval(stepInterval); stepInterval = null; }
    }

    showHome();
  </script>
</body>
</html>
