<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Understanding Sadness</title>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    /* --- THEME --- */
    body{
      margin:0; padding:0;
      background:#F5FAFF;
      font-family:'Fredoka', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:#1F2937;
      display:flex; justify-content:center;
      min-height:100vh;
      overflow-x:hidden;
    }
    #app-container{
      width:100%;
      max-width:860px;
      padding:44px 18px;
      position:relative;
    }

    /* --- CARDS --- */
    .white-card{
      background:white;
      border-radius:26px;
      padding:30px;
      box-shadow:0 10px 26px rgba(0,0,0,0.06);
      text-align:center;
      margin-bottom:24px;
      border-bottom:7px solid #E5E7EB;
      position:relative;
      overflow:visible;
      transition:transform .2s ease;
    }
    .white-card:hover{ transform: translateY(-4px); }

    /* --- TYPOGRAPHY --- */
    .title{
      font-size: 40px;
      font-weight: 800;
      text-align:center;
      margin: 0 0 8px 0;
      letter-spacing: .2px;
    }
    .subtitle{
      text-align:center;
      color:#64748B;
      margin:0 0 34px 0;
      font-size:18px;
      line-height:1.45;
    }
    .blue-title{ color:#2563EB; }
    .navy-title{ color:#0F172A; }

    .card-title{
      font-size: 22px;
      font-weight: 800;
      margin: 10px 0 6px 0;
      color:#0F172A;
    }
    .card-desc{
      font-size: 16px;
      color:#64748B;
      line-height:1.55;
      margin:0;
    }

    /* --- BUTTONS --- */
    .btn{
      padding: 14px 22px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 18px;
      border:none;
      cursor:pointer;
      color:white;
      transition: transform .2s ease, filter .2s ease;
      width:100%;
      margin-top:16px;
      box-shadow:0 7px 16px rgba(0,0,0,0.12);
    }
    .btn:hover{ transform: scale(1.02); filter: brightness(1.06); }
    .btn:disabled{ opacity:.75; cursor:not-allowed; transform:none; }

    .btn-blue{ background: linear-gradient(135deg, #3B82F6, #2563EB); }
    .btn-indigo{ background: linear-gradient(135deg, #6366F1, #4338CA); }
    .btn-sky{ background: linear-gradient(135deg, #38BDF8, #0EA5E9); }
    .btn-teal{ background: linear-gradient(135deg, #2DD4BF, #0D9488); }
    .btn-amber{ background: linear-gradient(135deg, #FBBF24, #D97706); }
    .btn-rose{ background: linear-gradient(135deg, #FB7185, #E11D48); }
    .btn-gray{ background: linear-gradient(135deg, #94A3B8, #64748B); }

    .btn-back{
      background: white;
      border:2px solid #CBD5E1;
      color:#334155;
      padding: 9px 16px;
      border-radius: 14px;
      font-weight: 800;
      cursor:pointer;
      margin-bottom:18px;
    }

    /* --- LAYOUT --- */
    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:22px; }
    @media (max-width: 650px){ .grid-2{ grid-template-columns:1fr; } }

    .center-row{
      display:flex;
      justify-content:center;
      align-items:center;
    }

    /* --- SVG STICKERS (robust) --- */
    .sticker-wrap{
      width: clamp(190px, 46vw, 260px);
      height: clamp(190px, 46vw, 260px);
      margin: 0 auto 8px auto;
      filter: drop-shadow(0 18px 20px rgba(0,0,0,0.16));
    }
    .sticker-wrap svg{ width:100%; height:100%; display:block; }

    /* --- GENERAL ANIMATIONS --- */
    @keyframes floaty{
      0%,100%{ transform: translateY(0) scale(1); }
      50%{ transform: translateY(-14px) scale(1.04); }
    }
    .floaty{ animation: floaty 2.8s infinite ease-in-out; }

    @keyframes wobble{
      0%{ transform: rotate(0deg); }
      25%{ transform: rotate(4deg); }
      50%{ transform: rotate(0deg); }
      75%{ transform: rotate(-4deg); }
      100%{ transform: rotate(0deg); }
    }
    .wobble{ animation: wobble .8s infinite ease-in-out; }

    /* -------- 3D PEG-IN-HOLE STICKERS -------- */
    .svg3d{ overflow: visible; }
    .svg3d .peg{
      transform-box: fill-box;
      transform-origin: center;
      animation: pegTry 2.2s infinite ease-in-out;
    }
    .svg3d .spark{
      transform-box: fill-box;
      transform-origin: center;
      animation: sparkPop 2.2s infinite ease-in-out;
    }
    @keyframes pegTry{
      0%   { transform: translate(-20px,-34px) rotate(-16deg); }
      38%  { transform: translate(22px,-18px) rotate(16deg); }
      68%  { transform: translate(0px,8px) rotate(0deg); }
      100% { transform: translate(-20px,-34px) rotate(-16deg); }
    }
    @keyframes sparkPop{
      0%,55% { opacity: 0; transform: scale(0.6); }
      68%    { opacity: 1; transform: scale(1.05); }
      85%    { opacity: 0; transform: scale(1.25); }
      100%   { opacity: 0; transform: scale(0.6); }
    }

    /* squeeze tool */
    .svgSqueeze .peg{
      transform-box: fill-box;
      transform-origin: center;
      animation: squeeze3d 1.6s infinite ease-in-out;
    }
    @keyframes squeeze3d{
      0%,100%{ transform: translate(0,-12px) scale(1,1); }
      50%    { transform: translate(0,10px) scale(1.06,0.86); }
    }

    /* box-breath tool */
    .svgBox .peg{
      transform-box: fill-box;
      transform-origin: center;
      animation: boxWalk 3.2s infinite linear;
    }
    @keyframes boxWalk{
      0%   { transform: translate(-34px,-34px); }
      25%  { transform: translate(34px,-34px); }
      50%  { transform: translate(34px,34px); }
      75%  { transform: translate(-34px,34px); }
      100% { transform: translate(-34px,-34px); }
    }

    /* --- tiny UI bits --- */
    .bubble{
      display:none;
      background:#EFF6FF;
      border:2px solid #BFDBFE;
      color:#1E40AF;
      padding:14px 14px;
      border-radius:18px;
      font-weight:800;
      margin-top:12px;
    }
    .pill{
      display:inline-block;
      padding:6px 12px;
      border-radius:999px;
      font-weight:800;
      font-size:13px;
      background:#E0F2FE;
      color:#075985;
      margin-top:10px;
    }
    .timer{
      font-size:34px;
      font-weight:900;
      margin-top:10px;
      color:#0F172A;
      min-height:44px;
    }
    .mini-panel{
      background:#F8FAFC;
      border:2px dashed #CBD5E1;
      border-radius:18px;
      padding:14px;
      margin-top:12px;
      text-align:center;
    }
  </style>
</head>

<body>
  <div id="app-container"></div>

  <script>
    const container = document.getElementById('app-container');

    /* ----------------- SVG STICKERS (INLINE) ----------------- */
    function svgTangleSticker(){
      // square peg trying the wrong hole (exaggerated)
      return `
      <div class="sticker-wrap">
        <svg class="svg3d" viewBox="0 0 220 220" aria-label="Big Tangle Peg">
          <defs>
            <linearGradient id="tPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#E0F2FE"/><stop offset="1" stop-color="#93C5FD"/>
            </linearGradient>
            <linearGradient id="tPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#FB7185"/><stop offset="1" stop-color="#E11D48"/>
            </linearGradient>
            <linearGradient id="tPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FECACA"/><stop offset="1" stop-color="#FB7185"/>
            </linearGradient>
            <linearGradient id="tPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#BE123C"/><stop offset="1" stop-color="#E11D48"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#EFF6FF"/>

          <rect x="52" y="118" width="116" height="72" rx="24" fill="url(#tPlate)"/>
          <!-- wrong hole (circle) -->
          <circle cx="110" cy="152" r="18" fill="#0F172A" opacity="0.18"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.10"/>
            <path d="M92 90 L128 90 L142 104 L110 118 L78 104 Z" fill="url(#tPegT)"/>
            <path d="M128 90 L142 104 L142 138 L128 124 Z" fill="url(#tPegS)"/>
            <path d="M92 90 L128 90 L128 124 L92 124 L78 138 L78 104 Z" fill="url(#tPegF)"/>
            <!-- confused face -->
            <circle cx="100" cy="126" r="5" fill="#0F172A" opacity="0.22"/>
            <circle cx="120" cy="126" r="5" fill="#0F172A" opacity="0.22"/>
            <path d="M100 142 Q110 136 120 142" fill="none" stroke="#0F172A" stroke-width="6" stroke-linecap="round" opacity="0.16"/>
          </g>

          <g class="spark" opacity="0">
            <path d="M110 132 L114 142 L124 146 L114 150 L110 160 L106 150 L96 146 L106 142 Z"
                  fill="#FDE68A"/>
          </g>
        </svg>
      </div>`;
    }

    function svgComfortToolsSticker(){
      // calm puzzle plate + heart peg (friendly)
      return `
      <div class="sticker-wrap">
        <svg class="svg3d floaty" viewBox="0 0 220 220" aria-label="Comfort Tools Peg">
          <defs>
            <linearGradient id="cPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#DBEAFE"/><stop offset="1" stop-color="#93C5FD"/>
            </linearGradient>
            <linearGradient id="cPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#60A5FA"/><stop offset="1" stop-color="#2563EB"/>
            </linearGradient>
            <linearGradient id="cPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#BFDBFE"/><stop offset="1" stop-color="#60A5FA"/>
            </linearGradient>
            <linearGradient id="cPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#1D4ED8"/><stop offset="1" stop-color="#2563EB"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#EFF6FF"/>

          <rect x="54" y="118" width="112" height="70" rx="22" fill="url(#cPlate)"/>
          <rect x="82" y="140" width="56" height="32" rx="12" fill="#1E3A8A" opacity="0.14"/>
          <rect x="98" y="142" width="24" height="24" rx="7" fill="#0F172A" opacity="0.18"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.10"/>
            <path d="M98 92 L122 92 L134 104 L110 116 L86 104 Z" fill="url(#cPegT)"/>
            <path d="M122 92 L134 104 L134 132 L122 120 Z" fill="url(#cPegS)"/>
            <path d="M98 92 L122 92 L122 120 L98 120 L86 132 L86 104 Z" fill="url(#cPegF)"/>
            <path d="M110 126 C110 126 98 118 98 110
                     C98 104 103 100 109 100
                     C112 100 114 101 110 106
                     C106 101 108 100 111 100
                     C117 100 122 104 122 110
                     C122 118 110 126 110 126 Z"
                  fill="#FB7185" opacity="0.95"/>
          </g>

          <g class="spark" opacity="0">
            <path d="M110 132 L114 142 L124 146 L114 150 L110 160 L106 150 L96 146 L106 142 Z"
                  fill="#FDE68A"/>
          </g>
        </svg>
      </div>`;
    }

    function toolStickerAskForComfort(){
      return `
      <div class="sticker-wrap">
        <svg class="svg3d" viewBox="0 0 220 220" aria-label="Ask for Comfort Peg">
          <defs>
            <linearGradient id="aPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#DBEAFE"/><stop offset="1" stop-color="#93C5FD"/>
            </linearGradient>
            <linearGradient id="aPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#60A5FA"/><stop offset="1" stop-color="#2563EB"/>
            </linearGradient>
            <linearGradient id="aPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#BFDBFE"/><stop offset="1" stop-color="#60A5FA"/>
            </linearGradient>
            <linearGradient id="aPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#1D4ED8"/><stop offset="1" stop-color="#2563EB"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#EFF6FF"/>

          <rect x="54" y="118" width="112" height="70" rx="22" fill="url(#aPlate)"/>
          <rect x="82" y="140" width="56" height="32" rx="12" fill="#1E3A8A" opacity="0.14"/>
          <rect x="98" y="142" width="24" height="24" rx="7" fill="#0F172A" opacity="0.18"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.12"/>
            <path d="M98 92 L122 92 L134 104 L110 116 L86 104 Z" fill="url(#aPegT)"/>
            <path d="M122 92 L134 104 L134 132 L122 120 Z" fill="url(#aPegS)"/>
            <path d="M98 92 L122 92 L122 120 L98 120 L86 132 L86 104 Z" fill="url(#aPegF)"/>
            <!-- little heart -->
            <path d="M110 126 C110 126 98 118 98 110
                     C98 104 103 100 109 100
                     C112 100 114 101 110 106
                     C106 101 108 100 111 100
                     C117 100 122 104 122 110
                     C122 118 110 126 110 126 Z"
                  fill="#FB7185" opacity="0.95"/>
          </g>

          <g class="spark" opacity="0">
            <path d="M110 132 L114 142 L124 146 L114 150 L110 160 L106 150 L96 146 L106 142 Z"
                  fill="#FDE68A"/>
          </g>
        </svg>
      </div>`;
    }

    function toolStickerNameIt(){
      return `
      <div class="sticker-wrap">
        <svg class="svg3d" viewBox="0 0 220 220" aria-label="Name It Peg">
          <defs>
            <linearGradient id="nPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#CCFBF1"/><stop offset="1" stop-color="#5EEAD4"/>
            </linearGradient>
            <linearGradient id="nPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#2DD4BF"/><stop offset="1" stop-color="#0D9488"/>
            </linearGradient>
            <linearGradient id="nPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#99F6E4"/><stop offset="1" stop-color="#2DD4BF"/>
            </linearGradient>
            <linearGradient id="nPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#0F766E"/><stop offset="1" stop-color="#0D9488"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#ECFEFF"/>

          <rect x="54" y="118" width="112" height="70" rx="22" fill="url(#nPlate)"/>
          <rect x="82" y="140" width="56" height="32" rx="12" fill="#064E3B" opacity="0.12"/>
          <rect x="98" y="142" width="24" height="24" rx="7" fill="#0F172A" opacity="0.18"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.10"/>
            <path d="M98 92 L122 92 L134 104 L110 116 L86 104 Z" fill="url(#nPegT)"/>
            <path d="M122 92 L134 104 L134 132 L122 120 Z" fill="url(#nPegS)"/>
            <path d="M98 92 L122 92 L122 120 L98 120 L86 132 L86 104 Z" fill="url(#nPegF)"/>
            <!-- label -->
            <path d="M98 124 H122 L130 132 L122 140 H98 Z" fill="#FFFFFF" opacity="0.92"/>
            <circle cx="106" cy="132" r="4" fill="#0F172A" opacity="0.22"/>
          </g>

          <g class="spark" opacity="0">
            <path d="M110 132 L114 142 L124 146 L114 150 L110 160 L106 150 L96 146 L106 142 Z"
                  fill="#FDE68A"/>
          </g>
        </svg>
      </div>`;
    }

    function toolStickerTinyStep(){
      return `
      <div class="sticker-wrap">
        <svg class="svg3d" viewBox="0 0 220 220" aria-label="Tiny Step Peg">
          <defs>
            <linearGradient id="sPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FFFBEB"/><stop offset="1" stop-color="#FDE68A"/>
            </linearGradient>
            <linearGradient id="sPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#FBBF24"/><stop offset="1" stop-color="#D97706"/>
            </linearGradient>
            <linearGradient id="sPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FDE68A"/><stop offset="1" stop-color="#FBBF24"/>
            </linearGradient>
            <linearGradient id="sPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#B45309"/><stop offset="1" stop-color="#D97706"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#FFFBEB"/>

          <rect x="54" y="118" width="112" height="70" rx="22" fill="url(#sPlate)"/>
          <!-- steps -->
          <rect x="76" y="150" width="28" height="20" rx="8" fill="#92400E" opacity="0.16"/>
          <rect x="104" y="142" width="28" height="28" rx="8" fill="#92400E" opacity="0.16"/>
          <rect x="132" y="134" width="28" height="36" rx="8" fill="#92400E" opacity="0.16"/>
          <rect x="98" y="142" width="24" height="24" rx="7" fill="#0F172A" opacity="0.16"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.10"/>
            <path d="M98 92 L122 92 L134 104 L110 116 L86 104 Z" fill="url(#sPegT)"/>
            <path d="M122 92 L134 104 L134 132 L122 120 Z" fill="url(#sPegS)"/>
            <path d="M98 92 L122 92 L122 120 L98 120 L86 132 L86 104 Z" fill="url(#sPegF)"/>
            <!-- tiny footprints -->
            <circle cx="106" cy="128" r="5" fill="#0F172A" opacity="0.16"/>
            <circle cx="116" cy="134" r="4" fill="#0F172A" opacity="0.12"/>
          </g>

          <g class="spark" opacity="0">
            <path d="M110 132 L114 142 L124 146 L114 150 L110 160 L106 150 L96 146 L106 142 Z"
                  fill="#FDE68A"/>
          </g>
        </svg>
      </div>`;
    }

    function toolStickerWarmSqueeze(){
      return `
      <div class="sticker-wrap">
        <svg class="svgSqueeze" viewBox="0 0 220 220" aria-label="Warm Squeeze Block">
          <defs>
            <linearGradient id="wPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FFF1F2"/><stop offset="1" stop-color="#FDA4AF"/>
            </linearGradient>
            <linearGradient id="wPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#FB7185"/><stop offset="1" stop-color="#E11D48"/>
            </linearGradient>
            <linearGradient id="wPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FECACA"/><stop offset="1" stop-color="#FB7185"/>
            </linearGradient>
            <linearGradient id="wPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#BE123C"/><stop offset="1" stop-color="#E11D48"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#FFF1F2"/>

          <rect x="54" y="118" width="112" height="70" rx="22" fill="url(#wPlate)"/>
          <rect x="82" y="140" width="56" height="32" rx="12" fill="#881337" opacity="0.10"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.10"/>
            <path d="M94 92 L126 92 L140 106 L110 120 L80 106 Z" fill="url(#wPegT)"/>
            <path d="M126 92 L140 106 L140 142 L126 128 Z" fill="url(#wPegS)"/>
            <path d="M94 92 L126 92 L126 128 L94 128 L80 142 L80 106 Z" fill="url(#wPegF)"/>
            <!-- smile -->
            <circle cx="100" cy="126" r="5" fill="#0F172A" opacity="0.20"/>
            <circle cx="120" cy="126" r="5" fill="#0F172A" opacity="0.20"/>
            <path d="M100 140 Q110 148 120 140" fill="none" stroke="#0F172A" stroke-width="6" stroke-linecap="round" opacity="0.15"/>
          </g>
        </svg>
      </div>`;
    }

    function toolStickerBrightSpot(){
      return `
      <div class="sticker-wrap">
        <svg class="svg3d" viewBox="0 0 220 220" aria-label="Bright Spot Peg">
          <defs>
            <linearGradient id="bPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#EEF2FF"/><stop offset="1" stop-color="#C7D2FE"/>
            </linearGradient>
            <linearGradient id="bPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#FBBF24"/><stop offset="1" stop-color="#F59E0B"/>
            </linearGradient>
            <linearGradient id="bPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#FDE68A"/><stop offset="1" stop-color="#FBBF24"/>
            </linearGradient>
            <linearGradient id="bPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#D97706"/><stop offset="1" stop-color="#F59E0B"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#EEF2FF"/>

          <rect x="54" y="118" width="112" height="70" rx="22" fill="url(#bPlate)"/>
          <rect x="82" y="140" width="56" height="32" rx="12" fill="#312E81" opacity="0.10"/>
          <rect x="98" y="142" width="24" height="24" rx="7" fill="#0F172A" opacity="0.16"/>

          <g class="peg">
            <ellipse cx="110" cy="168" rx="28" ry="10" fill="#0F172A" opacity="0.10"/>
            <path d="M98 92 L122 92 L134 104 L110 116 L86 104 Z" fill="url(#bPegT)"/>
            <path d="M122 92 L134 104 L134 132 L122 120 Z" fill="url(#bPegS)"/>
            <path d="M98 92 L122 92 L122 120 L98 120 L86 132 L86 104 Z" fill="url(#bPegF)"/>
            <!-- little sun rays -->
            <path d="M110 98 L110 90" stroke="#F59E0B" stroke-width="6" stroke-linecap="round"/>
            <path d="M126 106 L132 100" stroke="#F59E0B" stroke-width="6" stroke-linecap="round"/>
            <path d="M94 106 L88 100" stroke="#F59E0B" stroke-width="6" stroke-linecap="round"/>
          </g>

          <g class="spark" opacity="0">
            <path d="M110 132 L114 142 L124 146 L114 150 L110 160 L106 150 L96 146 L106 142 Z"
                  fill="#FDE68A"/>
          </g>
        </svg>
      </div>`;
    }

    function toolStickerBoxBreath(){
      return `
      <div class="sticker-wrap">
        <svg class="svgBox" viewBox="0 0 220 220" aria-label="Box Breath Peg">
          <defs>
            <linearGradient id="xPlate" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#DBEAFE"/><stop offset="1" stop-color="#93C5FD"/>
            </linearGradient>
            <linearGradient id="xPegF" x1="0" y1="0" x2="0" y2="1">
              <stop offset="0" stop-color="#60A5FA"/><stop offset="1" stop-color="#2563EB"/>
            </linearGradient>
            <linearGradient id="xPegT" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#BFDBFE"/><stop offset="1" stop-color="#60A5FA"/>
            </linearGradient>
            <linearGradient id="xPegS" x1="0" y1="0" x2="1" y2="1">
              <stop offset="0" stop-color="#1D4ED8"/><stop offset="1" stop-color="#2563EB"/>
            </linearGradient>
          </defs>

          <path d="M46 86 C28 42 74 18 112 26 C150 34 192 30 196 70
                   C200 110 202 160 160 190 C118 218 62 204 44 172
                   C28 144 58 126 46 86 Z" fill="#EFF6FF"/>

          <rect x="54" y="92" width="112" height="112" rx="26" fill="url(#xPlate)"/>
          <rect x="78" y="116" width="64" height="64" rx="18" fill="#1E3A8A" opacity="0.12"/>
          <rect x="92" y="130" width="36" height="36" rx="12" fill="#0F172A" opacity="0.10"/>

          <g class="peg">
            <path d="M100 98 L120 98 L130 108 L110 118 L90 108 Z" fill="url(#xPegT)"/>
            <path d="M120 98 L130 108 L130 128 L120 118 Z" fill="url(#xPegS)"/>
            <path d="M100 98 L120 98 L120 118 L100 118 L90 128 L90 108 Z" fill="url(#xPegF)"/>
          </g>
        </svg>
      </div>`;
    }

    /* ----------------- VIEWS ----------------- */
    function showHome(){
      container.innerHTML = `
        <h1 class="title navy-title">Understanding Sadness</h1>
        <p class="subtitle">Sadness feels heavy. Let’s make it lighter—step by step.</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#60A5FA;">
            ${svgTangleSticker()}
            <div class="card-title">The Heavy Feeling</div>
            <p class="card-desc">“I feel low… and everything feels hard.”</p>
            <button class="btn btn-sky" onclick="showReactions()">See Behaviors</button>
          </div>

          <div class="white-card" style="border-bottom-color:#2563EB;">
            ${svgComfortToolsSticker()}
            <div class="card-title">Comfort Tools</div>
            <p class="card-desc">Science-backed ways to feel steadier.</p>
            <button class="btn btn-blue" onclick="showSolutions()">Show Comfort Tools</button>
          </div>
        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">← Back to Menu</a>
        </div>
      `;
    }

    function showReactions(){
      container.innerHTML = `
        <button class="btn-back" onclick="showHome()">← Back</button>
        <h1 class="title blue-title">How Do I Act When I’m Sad?</h1>
        <p class="subtitle" style="color:#2563EB; font-weight:800;">These are common reactions (not “bad,” just signals).</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#93C5FD;">
            <div class="sticker-wrap">${toolStickerNameIt()}</div>
            <div class="card-title">I Go Quiet</div>
            <p class="card-desc">I don’t want to talk or move.</p>
          </div>
          <div class="white-card" style="border-bottom-color:#93C5FD;">
            <div class="sticker-wrap">${toolStickerWarmSqueeze()}</div>
            <div class="card-title">I Want to Cry</div>
            <p class="card-desc">Tears show I need comfort.</p>
          </div>
          <div class="white-card" style="border-bottom-color:#93C5FD;">
            <div class="sticker-wrap">${toolStickerTinyStep()}</div>
            <div class="card-title">I Stop Trying</div>
            <p class="card-desc">I feel like giving up.</p>
          </div>
          <div class="white-card" style="border-bottom-color:#93C5FD;">
            <div class="sticker-wrap">${toolStickerAskForComfort()}</div>
            <div class="card-title">I Hide Away</div>
            <p class="card-desc">I want to be alone.</p>
          </div>
        </div>

        <div class="white-card" style="margin-top:26px; border-bottom-color:#2563EB;">
          <p style="font-weight:900; font-size:20px; color:#1E40AF; margin:0;">What happens if I stay stuck like this?</p>
          <button class="btn btn-blue" style="width:auto; margin-top:14px;" onclick="showConsequences()">See Consequences ➔</button>
        </div>
      `;
    }

    function showConsequences(){
      container.innerHTML = `
        <button class="btn-back" onclick="showReactions()">← Back</button>
        <h1 class="title blue-title">When Sadness Stays Too Long…</h1>
        <p class="subtitle">It can pull energy away from thinking, playing, and connecting.</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#60A5FA;">
            <div class="sticker-wrap">${toolStickerBoxBreath()}</div>
            <div class="card-title">Brain Fog</div>
            <p class="card-desc">Hard to focus or decide.</p>
          </div>
          <div class="white-card" style="border-bottom-color:#60A5FA;">
            <div class="sticker-wrap">${toolStickerBrightSpot()}</div>
            <div class="card-title">Less Joy</div>
            <p class="card-desc">Fun feels far away.</p>
          </div>
          <div class="white-card" style="border-bottom-color:#60A5FA;">
            <div class="sticker-wrap">${toolStickerWarmSqueeze()}</div>
            <div class="card-title">Heavy Body</div>
            <p class="card-desc">Everything feels slow.</p>
          </div>
          <div class="white-card" style="border-bottom-color:#60A5FA;">
            <div class="sticker-wrap">${toolStickerAskForComfort()}</div>
            <div class="card-title">Lonely Feeling</div>
            <p class="card-desc">I need safe connection.</p>
          </div>
        </div>

        <div class="white-card" style="margin-top:26px; border-bottom-color:#22C55E;">
          <p style="font-weight:900; font-size:20px; color:#166534; margin:0;">Good news: comfort tools can lift the weight.</p>
          <button class="btn btn-teal" style="width:auto; margin-top:14px;" onclick="showSolutions()">Go to Comfort Tools ➔</button>
        </div>
      `;
    }

    function showSolutions(){
      container.innerHTML = `
        <button class="btn-back" onclick="showHome()">← Back to Start</button>
        <h1 class="title blue-title">Comfort Tools</h1>
        <p class="subtitle">These help your body calm down and your mind feel steadier.</p>

        <div style="display:flex; flex-direction:column; gap:26px; margin-top:18px;">

          <!-- TOOL 1 -->
          <div class="white-card" style="border-bottom-color:#2563EB;">
            ${toolStickerAskForComfort()}
            <div class="card-title" style="color:#2563EB;">Ask for Comfort</div>
            <p class="card-desc">Connection helps the brain feel safer. Ask for a small comfort, not a big fix.</p>
            <div id="comfort-bubble" class="bubble">“Can I have a hug, or can you sit with me for one minute?”</div>
            <button class="btn btn-blue" onclick="practiceComfort()">Practice Asking</button>
          </div>

          <!-- TOOL 2 -->
          <div class="white-card" style="border-bottom-color:#0D9488;">
            ${toolStickerNameIt()}
            <div class="card-title" style="color:#0D9488;">Name It to Tame It</div>
            <p class="card-desc">Putting feelings into words can reduce intensity and bring clarity.</p>
            <div class="mini-panel">
              <div class="pill" id="label-pill">Sad</div>
              <div style="font-weight:900; font-size:18px; margin-top:10px;" id="label-line">“I feel sad.”</div>
              <div style="color:#64748B; margin-top:6px;" id="label-help">Try a closer word.</div>
            </div>
            <button class="btn btn-teal" onclick="cycleLabel()">Try Another Word</button>
          </div>

          <!-- TOOL 3 -->
          <div class="white-card" style="border-bottom-color:#D97706;">
            ${toolStickerTinyStep()}
            <div class="card-title" style="color:#D97706;">One Tiny Step</div>
            <p class="card-desc">A small action can gently lift mood (behavioral activation).</p>
            <div class="timer" id="step-timer"></div>
            <button class="btn btn-amber" id="step-btn" onclick="startTinyStep()">Do 20 Seconds</button>
            <div class="mini-panel" id="step-idea" style="display:none;">
              Tiny step ideas: drink water, stand up, open the window, put one toy away.
            </div>
          </div>

          <!-- TOOL 4 -->
          <div class="white-card" style="border-bottom-color:#E11D48;">
            ${toolStickerWarmSqueeze()}
            <div class="card-title" style="color:#E11D48;">Warm Squeeze</div>
            <p class="card-desc">Deep pressure (a safe hug or squeeze pillow) can help your body settle.</p>
            <div class="mini-panel" id="squeeze-msg" style="display:none;">
              Squeeze for 5…4…3…2…1. Now soften your shoulders.
            </div>
            <button class="btn btn-rose" onclick="doSqueeze()">Squeeze Power</button>
          </div>

          <!-- TOOL 5 -->
          <div class="white-card" style="border-bottom-color:#4338CA;">
            ${toolStickerBrightSpot()}
            <div class="card-title" style="color:#4338CA;">Find a Bright Spot</div>
            <p class="card-desc">Shift attention to one safe, small good thing (not denial—just balance).</p>
            <div class="mini-panel" id="bright-panel" style="display:none;">
              1) Something good I saw: ________ <br>
              2) Someone kind to me: ________ <br>
              3) One thing I can do next: ________
            </div>
            <button class="btn btn-indigo" onclick="toggleBright()">Open Bright Spot</button>
          </div>

          <!-- TOOL 6 -->
          <div class="white-card" style="border-bottom-color:#0EA5E9;">
            ${toolStickerBoxBreath()}
            <div class="card-title" style="color:#0EA5E9;">Box Breath</div>
            <p class="card-desc">Slow breathing helps the nervous system downshift.</p>
            <div class="mini-panel">
              <div class="pill" id="box-phase">In</div>
              <div style="font-weight:900; font-size:22px; margin-top:10px;" id="box-count">4</div>
              <div style="color:#64748B; margin-top:6px;" id="box-help">Breathe in slowly.</div>
            </div>
            <button class="btn btn-sky" id="box-btn" onclick="toggleBoxBreath()">Start Box Breath</button>
          </div>

        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">← Back to Menu</a>
        </div>
      `;
      // reset internal state for tools each time we open Solutions
      resetSolutionState();
    }

    /* ----------------- TOOL LOGIC ----------------- */
    function practiceComfort(){
      const b = document.getElementById('comfort-bubble');
      if(!b) return;
      b.style.display = (b.style.display === 'block') ? 'none' : 'block';
    }

    const labels = [
      { word:"Sad", line:"“I feel sad.”", help:"Try a closer word." },
      { word:"Lonely", line:"“I feel lonely.”", help:"Maybe I need connection." },
      { word:"Disappointed", line:"“I feel disappointed.”", help:"Something didn’t go how I hoped." },
      { word:"Hurt", line:"“I feel hurt.”", help:"My feelings got bumped." },
      { word:"Tired", line:"“I feel tired.”", help:"Rest can help my feelings too." }
    ];
    let labelIndex = 0;
    function cycleLabel(){
      const pill = document.getElementById('label-pill');
      const line = document.getElementById('label-line');
      const help = document.getElementById('label-help');
      if(!pill || !line || !help) return;

      labelIndex = (labelIndex + 1) % labels.length;
      pill.textContent = labels[labelIndex].word;
      line.textContent = labels[labelIndex].line;
      help.textContent = labels[labelIndex].help;
    }

    let stepInterval = null;
    function startTinyStep(){
      const timer = document.getElementById('step-timer');
      const btn = document.getElementById('step-btn');
      const idea = document.getElementById('step-idea');
      if(!timer || !btn || !idea) return;

      if(stepInterval) return;

      let t = 20;
      timer.textContent = t;
      idea.style.display = 'block';
      btn.disabled = true;
      btn.textContent = "Doing it...";

      stepInterval = setInterval(() => {
        t--;
        timer.textContent = t;
        if(t <= 0){
          clearInterval(stepInterval);
          stepInterval = null;
          timer.textContent = "Nice!";
          btn.disabled = false;
          btn.textContent = "Do 20 Seconds Again";
        }
      }, 1000);
    }

    function doSqueeze(){
      const msg = document.getElementById('squeeze-msg');
      if(!msg) return;

      msg.style.display = 'block';
      setTimeout(() => {
        msg.style.display = 'none';
      }, 2600);
    }

    function toggleBright(){
      const panel = document.getElementById('bright-panel');
      if(!panel) return;
      panel.style.display = (panel.style.display === 'block') ? 'none' : 'block';
    }

    let boxRunning = false;
    let boxTimer = null;
    const boxPhases = [
      { phase:"In",  help:"Breathe in slowly." },
      { phase:"Hold",help:"Hold gently." },
      { phase:"Out", help:"Breathe out slowly." },
      { phase:"Hold",help:"Hold gently." }
    ];
    let boxPhaseIndex = 0;
    let boxCount = 4;

    function toggleBoxBreath(){
      const phaseEl = document.getElementById('box-phase');
      const countEl = document.getElementById('box-count');
      const helpEl  = document.getElementById('box-help');
      const btn     = document.getElementById('box-btn');
      if(!phaseEl || !countEl || !helpEl || !btn) return;

      if(boxRunning){
        clearInterval(boxTimer);
        boxTimer = null;
        boxRunning = false;
        btn.textContent = "Start Box Breath";
        phaseEl.textContent = "In";
        countEl.textContent = "4";
        helpEl.textContent = "Breathe in slowly.";
        boxPhaseIndex = 0;
        boxCount = 4;
        return;
      }

      boxRunning = true;
      btn.textContent = "Stop Box Breath";
      phaseEl.textContent = boxPhases[boxPhaseIndex].phase;
      helpEl.textContent  = boxPhases[boxPhaseIndex].help;
      countEl.textContent = boxCount;

      boxTimer = setInterval(() => {
        boxCount--;
        countEl.textContent = boxCount;
        if(boxCount <= 0){
          boxPhaseIndex = (boxPhaseIndex + 1) % boxPhases.length;
          boxCount = 4;
          phaseEl.textContent = boxPhases[boxPhaseIndex].phase;
          helpEl.textContent  = boxPhases[boxPhaseIndex].help;
          countEl.textContent = boxCount;
        }
      }, 1000);
    }

    function resetSolutionState(){
      labelIndex = 0;
      boxRunning = false;
      if(boxTimer){ clearInterval(boxTimer); boxTimer = null; }
      if(stepInterval){ clearInterval(stepInterval); stepInterval = null; }
    }

    /* ----------------- INIT ----------------- */
    showHome();
  </script>
</body>
</html>
