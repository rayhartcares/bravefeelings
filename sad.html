<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Understanding Sadness</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body{
      margin:0; padding:0;
      background:#F0F9FF;
      font-family:'Fredoka',sans-serif;
      color:#1F2937;
      display:flex; justify-content:center;
      min-height:100vh;
      overflow-x:hidden;
    }
    #app-container{ width:100%; max-width:860px; padding:42px 18px; }

    .white-card{
      background:#fff;
      border-radius:26px;
      padding:30px 26px;
      box-shadow:0 14px 30px rgba(0,0,0,.08);
      text-align:center;
      margin-bottom:24px;
      border-bottom:7px solid #E5E7EB;
      transition:transform .18s ease;
      position:relative;
      overflow:hidden;
    }
    .white-card:hover{ transform:translateY(-4px); }

    .title{
      font-size:40px;
      font-weight:800;
      text-align:center;
      margin:0 0 8px;
      color:#0F172A;
      letter-spacing:.2px;
    }
    .subtitle{
      text-align:center;
      color:#64748B;
      font-size:18px;
      margin:0 0 34px;
    }

    .grid-2{ display:grid; grid-template-columns:1fr 1fr; gap:22px; }
    @media (max-width:650px){ .grid-2{ grid-template-columns:1fr; } }

    .card-title{ font-size:22px; font-weight:800; margin:10px 0 6px; }
    .card-desc{ font-size:16px; color:#64748B; line-height:1.45; margin:0; }

    .btn{
      width:100%;
      margin-top:16px;
      padding:14px 18px;
      border-radius:16px;
      border:none;
      cursor:pointer;
      font-weight:800;
      font-size:18px;
      color:#fff;
      transition:transform .15s ease, filter .15s ease;
      box-shadow:0 10px 18px rgba(0,0,0,.12);
    }
    .btn:hover{ transform:scale(1.01); filter:brightness(1.05); }
    .btn:disabled{ opacity:.65; cursor:not-allowed; transform:none; }

    .btn-blue{ background:linear-gradient(135deg,#3B82F6,#2563EB); }
    .btn-indigo{ background:linear-gradient(135deg,#6366F1,#4F46E5); }
    .btn-pink{ background:linear-gradient(135deg,#FB7185,#E11D48); }
    .btn-sky{ background:linear-gradient(135deg,#38BDF8,#0284C7); }
    .btn-slate{ background:linear-gradient(135deg,#94A3B8,#475569); }

    .btn-back{
      background:#fff;
      border:2px solid #CBD5E1;
      color:#334155;
      padding:8px 14px;
      border-radius:12px;
      font-weight:800;
      cursor:pointer;
      margin-bottom:18px;
    }

    /* --- ‚ÄúAlive‚Äù illustrations (image + emoji fallback) --- */
    .sticker-img{
      width:128px; height:128px;
      object-fit:contain;
      filter:drop-shadow(0 14px 12px rgba(0,0,0,.14));
    }
    .sticker-emoji{
      width:128px; height:128px;
      display:grid; place-items:center;
      font-size:76px;
      filter:drop-shadow(0 14px 12px rgba(0,0,0,.14));
      user-select:none;
    }

    @keyframes floaty{ 0%,100%{transform:translateY(0) scale(1);} 50%{transform:translateY(-14px) scale(1.06);} }
    @keyframes wobble{ 0%,100%{transform:rotate(0deg) scale(1);} 25%{transform:rotate(6deg) scale(1.02);} 75%{transform:rotate(-6deg) scale(1.02);} }
    .animate-float{ animation:floaty 2.8s infinite ease-in-out; }
    .animate-wobble{ animation:wobble .65s infinite ease-in-out; }

    /* mini panel */
    .mini-panel{
      background:#F8FAFC;
      border:2px dashed #CBD5E1;
      border-radius:18px;
      padding:16px;
      margin-top:14px;
      text-align:left;
      color:#334155;
    }
    .pill{
      display:inline-block;
      padding:6px 12px;
      border-radius:999px;
      font-weight:800;
      font-size:14px;
      background:#E0F2FE;
      color:#075985;
    }

    /* Bright glitter overlay */
    @keyframes glitter{
      0%{ transform:translate(0,0) scale(.9); opacity:.1; }
      25%{ transform:translate(18px,-10px) scale(1.2); opacity:.7; }
      50%{ transform:translate(-10px,12px) scale(1.1); opacity:.4; }
      75%{ transform:translate(10px,18px) scale(1.25); opacity:.8; }
      100%{ transform:translate(0,0) scale(.9); opacity:.1; }
    }
    .glitterWrap{ position:relative; display:inline-block; }
    .glitterDot{
      position:absolute;
      width:12px; height:12px;
      border-radius:4px;
      background:rgba(255,255,255,.9);
      box-shadow:0 0 20px rgba(250,204,21,.65);
      opacity:.1;
      animation:glitter 1.2s infinite ease-in-out;
    }
    .g1{ top:8px; left:-6px; animation-delay:.05s; }
    .g2{ top:16px; right:-8px; animation-delay:.22s; }
    .g3{ bottom:8px; left:10px; animation-delay:.35s; }
    .g4{ bottom:12px; right:10px; animation-delay:.12s; }

    /* ==============================
       BOX BREATH (3D CARTOON LUNGS)
       ============================== */
    @keyframes lungs-float{ 0%,100%{transform:translateY(0);} 50%{transform:translateY(-10px);} }
    @keyframes lungs-wiggle{ 0%,100%{transform:translateY(0) rotate(0deg);} 50%{transform:translateY(-2px) rotate(1deg);} }
    @keyframes puff-up{ 0%{transform:translateY(18px) scale(.6);opacity:0;} 20%{opacity:.8;} 100%{transform:translateY(-40px) scale(1.6);opacity:0;} }
    @keyframes puff-down{ 0%{transform:translateY(-18px) scale(.6);opacity:0;} 20%{opacity:.8;} 100%{transform:translateY(38px) scale(1.6);opacity:0;} }

    .lungsWrap{
      width:210px; height:170px;
      position:relative;
      display:grid; place-items:center;
      animation:lungs-float 2.2s infinite ease-in-out;
      filter:drop-shadow(0 18px 18px rgba(0,0,0,0.16));
      margin:0 auto 12px;
    }
    .airTube{
      position:absolute; top:16px;
      width:46px; height:64px;
      border-radius:22px;
      background:linear-gradient(135deg,#E2E8F0,#94A3B8);
      box-shadow:inset 0 10px 18px rgba(255,255,255,.35), inset 0 -10px 18px rgba(0,0,0,.12);
    }
    .airTube::after{
      content:""; position:absolute; left:50%; top:44px; transform:translateX(-50%);
      width:66px; height:20px; border-radius:999px;
      background:linear-gradient(135deg,#F8FAFC,#CBD5E1);
      box-shadow:inset 0 8px 12px rgba(255,255,255,.35), inset 0 -8px 12px rgba(0,0,0,.10);
    }
    .lungs{
      position:absolute; top:58px;
      width:190px; height:108px;
      display:flex; justify-content:center; gap:12px;
      pointer-events:none;
    }
    .lung{
      width:84px; height:104px;
      border-radius:48% 52% 60% 40% / 55% 55% 45% 45%;
      background:linear-gradient(135deg,#C7D2FE,#38BDF8);
      box-shadow:inset 0 16px 26px rgba(255,255,255,.45), inset 0 -18px 24px rgba(0,0,0,.14);
      position:relative;
      transform:scale(.98);
      transition:transform .55s ease, filter .55s ease;
    }
    .lung::before{
      content:""; position:absolute; left:14px; top:16px;
      width:22px; height:46px; border-radius:999px;
      background:rgba(255,255,255,.28);
      transform:rotate(-10deg);
    }
    .lung.left{ transform-origin:70% 50%; }
    .lung.right{ transform-origin:30% 50%; }
    .ribs{
      position:absolute; bottom:20px; left:50%; transform:translateX(-50%);
      width:56px; height:26px; border-radius:999px;
      box-shadow:0 8px 0 rgba(15,23,42,.08), 0 16px 0 rgba(15,23,42,.06);
      opacity:.55;
    }
    .airFlow{
      position:absolute; left:50%; transform:translateX(-50%);
      width:120px; height:120px;
      pointer-events:none;
      opacity:0;
      transition:opacity .2s ease;
    }
    .airIn{ top:18px; }
    .airOut{ top:68px; }
    .puff{
      position:absolute; width:14px; height:14px; border-radius:6px;
      background:rgba(255,255,255,.85);
      box-shadow:0 0 18px rgba(56,189,248,.35);
      opacity:0;
    }
    .p1{ left:16px; } .p2{ left:52px; } .p3{ left:88px; }

    .lungsWrap.inhale .lung{ transform:scale(1.22); filter:drop-shadow(0 0 22px rgba(56,189,248,.55)); }
    .lungsWrap.hold .lungs{ animation:lungs-wiggle 1s infinite ease-in-out; }
    .lungsWrap.exhale .lung{ transform:scale(.86); filter:drop-shadow(0 0 10px rgba(56,189,248,.25)); }

    .lungsWrap.inhale .airIn{ opacity:1; }
    .lungsWrap.exhale .airOut{ opacity:1; }

    .lungsWrap.inhale .airIn .puff{ animation:puff-up .85s ease-out infinite; }
    .lungsWrap.inhale .airIn .p2{ animation-delay:.12s; }
    .lungsWrap.inhale .airIn .p3{ animation-delay:.24s; }

    .lungsWrap.exhale .airOut .puff{ animation:puff-down .85s ease-out infinite; }
    .lungsWrap.exhale .airOut .p2{ animation-delay:.12s; }
    .lungsWrap.exhale .airOut .p3{ animation-delay:.24s; }
  </style>
</head>

<body>
  <div id="app-container"></div>

  <script>
    const container = document.getElementById("app-container");

    // Fluent emoji base
    const FLUENT = "https://raw.githubusercontent.com/Tarikul-Islam-Anik/Animated-Fluent-Emojis/master/Emojis/";
    const src = (path) => FLUENT + path;

    // If an image fails, replace it with an always-working emoji (no broken icons)
    function imgFallback(img, emoji){
      const d = document.createElement("div");
      d.className = "sticker-emoji animate-float";
      d.textContent = emoji;
      img.replaceWith(d);
    }

    function showHome(){
      container.innerHTML = `
        <h1 class="title">Understanding Sadness</h1>
        <p class="subtitle">Sad can feel heavy. Let‚Äôs make it lighter ‚Äî one step at a time.</p>

        <div class="grid-2">
          <div class="white-card">
            <img class="sticker-img animate-float"
              src="${src("Travel%20and%20places/Cloud%20with%20Rain.png")}"
              onerror="imgFallback(this,'üò¢')"
              alt="Sad cloud">
            <div class="card-title">The Heavy Feeling</div>
            <p class="card-desc">‚ÄúI feel down‚Ä¶ I don‚Äôt want to do anything.‚Äù</p>
            <button class="btn btn-blue" onclick="showReactions()">See Behaviors</button>
          </div>

          <div class="white-card">
            <img class="sticker-img animate-float"
              src="${src("Smilies/Relieved%20Face.png")}"
              onerror="imgFallback(this,'ü§ç')"
              alt="Relief">
            <div class="card-title">Comfort Tools</div>
            <p class="card-desc">Gentle, science-based ways to feel safer inside.</p>
            <button class="btn btn-indigo" onclick="showSolutions()">Show Tools</button>
          </div>
        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">‚Üê Back to Menu</a>
        </div>
      `;
    }

    function showReactions(){
      container.innerHTML = `
        <button class="btn-back" onclick="showHome()">‚Üê Back</button>
        <h1 class="title" style="color:#2563EB;">How Do I Act When I‚Äôm Sad?</h1>
        <p class="subtitle" style="margin-bottom:22px;">Sadness can change what we do. These are common ‚Äúsad habits.‚Äù</p>

        <div class="grid-2">
          <div class="white-card">
            <img class="sticker-img animate-wobble"
              src="${src("Smilies/Loudly%20Crying%20Face.png")}"
              onerror="imgFallback(this,'üò≠')">
            <div class="card-title">Crying a Lot</div>
            <p class="card-desc">Big tears and big feelings.</p>
          </div>

          <div class="white-card">
            <img class="sticker-img animate-wobble"
              src="${src("Smilies/Pensive%20Face.png")}"
              onerror="imgFallback(this,'üòî')">
            <div class="card-title">Shutting Down</div>
            <p class="card-desc">Not talking. Not wanting to move.</p>
          </div>

          <div class="white-card">
            <img class="sticker-img animate-wobble"
              src="${src("People/Person%20in%20Bed.png")}"
              onerror="imgFallback(this,'üõå')">
            <div class="card-title">Hiding / Staying in Bed</div>
            <p class="card-desc">Avoiding everything.</p>
          </div>

          <div class="white-card">
            <img class="sticker-img animate-wobble"
              src="${src("Smilies/Broken%20Heart.png")}"
              onerror="imgFallback(this,'üíî')">
            <div class="card-title">Feeling Unloved</div>
            <p class="card-desc">‚ÄúNobody cares about me.‚Äù</p>
          </div>
        </div>

        <div class="white-card" style="border-bottom-color:#2563EB; margin-top:8px;">
          <div style="font-weight:900; font-size:20px; color:#1D4ED8;">What happens if I stay stuck here?</div>
          <button class="btn btn-blue" style="width:auto; margin-top:14px;" onclick="showConsequences()">See Consequences ‚ûî</button>
        </div>
      `;
    }

    function showConsequences(){
      container.innerHTML = `
        <button class="btn-back" onclick="showReactions()">‚Üê Back</button>
        <h1 class="title" style="color:#1D4ED8;">When Sadness Stays Too Long‚Ä¶</h1>
        <p class="subtitle">Your brain and body get tired. It‚Äôs harder to think and do things.</p>

        <div class="grid-2">
          <div class="white-card">
            <img class="sticker-img"
              src="${src("Smilies/Tired%20Face.png")}"
              onerror="imgFallback(this,'üò´')">
            <div class="card-title">Low Energy</div>
            <p class="card-desc">Everything feels hard.</p>
          </div>

          <div class="white-card">
            <img class="sticker-img"
              src="${src("Smilies/Face%20with%20Head-Bandage.png")}"
              onerror="imgFallback(this,'ü§ï')">
            <div class="card-title">Brain Fog</div>
            <p class="card-desc">Hard to focus or decide.</p>
          </div>

          <div class="white-card">
            <img class="sticker-img"
              src="${src("Smilies/Weary%20Face.png")}"
              onerror="imgFallback(this,'üò©')">
            <div class="card-title">More Tears</div>
            <p class="card-desc">Feelings overflow faster.</p>
          </div>

          <div class="white-card">
            <img class="sticker-img"
              src="${src("Smilies/Confounded%20Face.png")}"
              onerror="imgFallback(this,'üòñ')">
            <div class="card-title">More Irritable</div>
            <p class="card-desc">Even small things bother you.</p>
          </div>
        </div>

        <div class="white-card" style="border-bottom-color:#4F46E5; margin-top:8px;">
          <div style="font-weight:900; font-size:20px; color:#4338CA;">Good news: comfort tools can help your system reset.</div>
          <button class="btn btn-indigo" style="width:auto; margin-top:14px;" onclick="showSolutions()">Go To Comfort Tools ‚ûî</button>
        </div>
      `;
    }

    function showSolutions(){
      container.innerHTML = `
        <button class="btn-back" onclick="showHome()">‚Üê Back to Start</button>
        <h1 class="title" style="color:#4F46E5;">Comfort Tools</h1>
        <p class="subtitle">These help your nervous system feel safer, calmer, and steadier.</p>

        <!-- TOOL 1 -->
        <div class="white-card" style="border-bottom-color:#E11D48;">
          <img class="sticker-img animate-float"
            src="${src("Smilies/Smiling%20Face%20with%20Hearts.png")}"
            onerror="imgFallback(this,'ü§ó')">
          <div class="card-title" style="color:#E11D48;">Warm Squeeze</div>
          <p class="card-desc">A safe hug or squeeze pillow can help your body settle.</p>
          <div class="mini-panel" id="squeezePanel">
            <span class="pill" style="background:#FFE4E6; color:#9F1239;">Try it</span>
            <div style="margin-top:10px; font-weight:900;" id="squeezeText">Press a pillow gently to your chest.</div>
          </div>
          <button class="btn btn-pink" onclick="doSqueeze()">Squeeze Power</button>
        </div>

        <!-- TOOL 2 -->
        <div class="white-card" style="border-bottom-color:#4F46E5;">
          <div class="glitterWrap">
            <img class="sticker-img animate-float"
              src="${src("Objects/Flashlight.png")}"
              onerror="imgFallback(this,'‚ú®')">
            <div class="glitterDot g1"></div><div class="glitterDot g2"></div><div class="glitterDot g3"></div><div class="glitterDot g4"></div>
          </div>
          <div class="card-title" style="color:#4F46E5;">Find a Bright Spot</div>
          <p class="card-desc">Find one small good thing ‚Äî just to balance the heavy feeling.</p>

          <div class="mini-panel" id="brightPanel" style="display:none;">
            <div style="font-weight:900; margin-bottom:8px;">Write 3 tiny good things:</div>
            <div>1) Something good I saw: _________</div>
            <div>2) Someone kind to me: _________</div>
            <div>3) One thing I can do next: _________</div>
          </div>

          <button class="btn btn-indigo" onclick="toggleBright()">Turn On Bright Spot</button>
        </div>

        <!-- TOOL 3 (BOX BREATH) -->
        <div class="white-card" style="border-bottom-color:#0284C7;">
          <div class="lungsWrap" id="lungsWrap">
            <div class="airTube"></div>

            <div class="lungs">
              <div class="lung left"><div class="ribs"></div></div>
              <div class="lung right"><div class="ribs"></div></div>
            </div>

            <div class="airFlow airIn">
              <div class="puff p1"></div><div class="puff p2"></div><div class="puff p3"></div>
            </div>
            <div class="airFlow airOut">
              <div class="puff p1"></div><div class="puff p2"></div><div class="puff p3"></div>
            </div>
          </div>

          <div class="card-title" style="color:#0284C7;">Box Breath</div>
          <p class="card-desc">Slow breathing helps your nervous system downshift.</p>

          <div class="mini-panel">
            <span class="pill" id="box-phase">In</span>
            <div style="font-weight:900; font-size:22px; margin-top:10px;" id="box-count">4</div>
            <div style="color:#64748B; margin-top:6px;" id="box-help">Breathe in slowly.</div>
          </div>

          <button class="btn btn-sky" id="box-btn" onclick="toggleBoxBreath()">Start Box Breath</button>
        </div>

        <!-- TOOL 4 -->
        <div class="white-card" style="border-bottom-color:#2563EB;">
          <img class="sticker-img animate-float"
            src="${src("People/Person%20Walking.png")}"
            onerror="imgFallback(this,'üö∂')">
          <div class="card-title" style="color:#2563EB;">Gentle Move</div>
          <p class="card-desc">Movement tells your brain: ‚ÄúI‚Äôm safe.‚Äù Try 10 seconds.</p>
          <div style="font-size:34px; font-weight:900; color:#2563EB; margin-top:10px;" id="moveTimer"></div>
          <button class="btn btn-blue" onclick="startMove10()">Start 10s Move</button>
        </div>

        <!-- TOOL 5 -->
        <div class="white-card" style="border-bottom-color:#475569;">
          <img class="sticker-img animate-float"
            src="${src("Objects/Telephone.png")}"
            onerror="imgFallback(this,'üó£Ô∏è')">
          <div class="card-title" style="color:#475569;">Talk It Out</div>
          <p class="card-desc">Naming feelings can reduce their intensity.</p>
          <div class="mini-panel" id="talkPanel" style="display:none;">
            <div style="font-weight:900;">Try this sentence:</div>
            <div style="margin-top:8px;">‚ÄúI feel sad because ________. I need ________.‚Äù</div>
          </div>
          <button class="btn btn-slate" onclick="toggleTalk()">Show Sentence</button>
        </div>

        <div style="text-align:center; margin-top:10px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">‚Üê Back to Menu</a>
        </div>
      `;
    }

    // -------- Tool logic --------
    function doSqueeze(){
      const p = document.getElementById("squeezePanel");
      const t = document.getElementById("squeezeText");
      if(!p || !t) return;
      p.style.transform = "scale(1.02)";
      t.textContent = "Squeeze‚Ä¶ hold‚Ä¶ now release slowly.";
      setTimeout(()=>{ p.style.transform="scale(1)"; t.textContent="Press a pillow gently to your chest."; }, 1400);
    }

    function toggleBright(){
      const panel = document.getElementById("brightPanel");
      if(!panel) return;
      panel.style.display = (panel.style.display === "none" || !panel.style.display) ? "block" : "none";
    }

    function startMove10(){
      let t=10;
      const el = document.getElementById("moveTimer");
      if(!el) return;
      el.textContent = t;
      const i = setInterval(()=>{
        t--;
        el.textContent = t>0 ? t : "Nice!";
        if(t<=0) clearInterval(i);
      },1000);
    }

    function toggleTalk(){
      const panel = document.getElementById("talkPanel");
      if(!panel) return;
      panel.style.display = (panel.style.display === "none" || !panel.style.display) ? "block" : "none";
    }

    // Box breath
    let boxRunning=false;
    let boxInterval=null;

    function setLungsPhase(phase){
      const wrap = document.getElementById("lungsWrap");
      if(!wrap) return;
      wrap.classList.remove("inhale","hold","exhale");
      wrap.classList.add(phase);
    }

    function toggleBoxBreath(){
      const btn = document.getElementById("box-btn");
      const phaseEl = document.getElementById("box-phase");
      const countEl = document.getElementById("box-count");
      const helpEl  = document.getElementById("box-help");

      if(!btn || !phaseEl || !countEl || !helpEl) return;

      if(boxRunning){
        boxRunning=false;
        clearInterval(boxInterval);
        boxInterval=null;
        btn.textContent="Start Box Breath";
        phaseEl.textContent="In";
        countEl.textContent="4";
        helpEl.textContent="Breathe in slowly.";
        setLungsPhase("inhale");
        return;
      }

      boxRunning=true;
      btn.textContent="Stop Box Breath";

      const steps=[
        {phase:"inhale", label:"In",  help:"Breathe in slowly."},
        {phase:"hold",   label:"Hold",help:"Hold gently (no strain)."},
        {phase:"exhale", label:"Out", help:"Breathe out slowly."},
        {phase:"hold",   label:"Hold",help:"Hold gently (no strain)."}
      ];

      let stepIndex=0;
      let t=4;

      const applyStep=()=>{
        const s=steps[stepIndex];
        phaseEl.textContent=s.label;
        helpEl.textContent=s.help;
        countEl.textContent=t;
        setLungsPhase(s.phase);
      };

      applyStep();

      boxInterval=setInterval(()=>{
        t--;
        if(t<=0){
          stepIndex=(stepIndex+1)%steps.length;
          t=4;
        }
        applyStep();
      },1000);
    }

    // Start
    showHome();
  </script>
</body>
</html>
