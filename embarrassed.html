<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Understanding Embarrassed</title>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    body {
      margin: 0; padding: 0;
      background: #F4FAFF;
      font-family: 'Fredoka', sans-serif;
      color: #1F2937;
      display: flex; justify-content: center;
      min-height: 100vh;
      overflow-x: hidden;
    }
    #app-container {
      width: 100%;
      max-width: 860px;
      padding: 44px 18px;
      position: relative;
    }

    .white-card {
      background: white;
      border-radius: 26px;
      padding: 30px;
      box-shadow: 0 10px 26px rgba(0,0,0,0.06);
      text-align: center;
      margin-bottom: 24px;
      border-bottom: 7px solid #E5E7EB;
      position: relative;
      overflow: visible;
      transition: transform .18s ease;
    }
    .white-card:hover { transform: translateY(-4px); }

    .title {
      font-size: 40px;
      font-weight: 800;
      text-align: center;
      margin: 0 0 8px 0;
      letter-spacing: .2px;
      color: #0F172A;
    }
    .subtitle {
      text-align: center;
      color: #64748B;
      margin: 0 0 34px 0;
      font-size: 18px;
      line-height: 1.45;
    }
    .accent-title { color: #DB2777; } /* pink-600 */

    .card-title {
      font-size: 22px;
      font-weight: 800;
      margin: 10px 0 6px 0;
      color: #0F172A;
    }
    .card-desc {
      font-size: 16px;
      color: #64748B;
      line-height: 1.55;
      margin: 0;
    }

    .btn {
      padding: 14px 22px;
      border-radius: 16px;
      font-weight: 800;
      font-size: 18px;
      border: none;
      cursor: pointer;
      color: white;
      transition: transform .2s ease, filter .2s ease;
      width: 100%;
      margin-top: 16px;
      box-shadow: 0 7px 16px rgba(0,0,0,0.12);
    }
    .btn:hover { transform: scale(1.02); filter: brightness(1.06); }
    .btn:disabled { opacity: .75; cursor: not-allowed; transform: none; }

    .btn-pink   { background: linear-gradient(135deg, #FB7185, #DB2777); }
    .btn-rose   { background: linear-gradient(135deg, #F472B6, #E11D48); }
    .btn-violet { background: linear-gradient(135deg, #A78BFA, #7C3AED); }
    .btn-sky    { background: linear-gradient(135deg, #38BDF8, #0EA5E9); }
    .btn-amber  { background: linear-gradient(135deg, #FBBF24, #D97706); }
    .btn-teal   { background: linear-gradient(135deg, #2DD4BF, #0D9488); }
    .btn-indigo { background: linear-gradient(135deg, #6366F1, #4338CA); }

    .btn-back {
      background: white;
      border: 2px solid #CBD5E1;
      color: #334155;
      padding: 9px 16px;
      border-radius: 14px;
      font-weight: 800;
      cursor: pointer;
      margin-bottom: 18px;
    }

    .grid-2 {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 22px;
    }
    @media (max-width: 650px) { .grid-2 { grid-template-columns: 1fr; } }

    .sticker-img {
      width: clamp(140px, 34vw, 210px);
      height: clamp(96px, 22vw, 160px);
      object-fit: contain;
      filter: drop-shadow(0 16px 18px rgba(0,0,0,0.16));
      user-select: none;
      -webkit-user-drag: none;
      border-radius: 18px;
      background: rgba(248,250,252,0.0);
    }

    @keyframes floaty { 0%,100%{ transform: translateY(0) scale(1); } 50%{ transform: translateY(-14px) scale(1.05); } }
    @keyframes wobble { 0%{ transform: rotate(0deg) } 25%{ transform: rotate(6deg) } 50%{ transform: rotate(0deg) } 75%{ transform: rotate(-6deg) } 100%{ transform: rotate(0deg) } }
    @keyframes boing  { 0%,100%{ transform: scale(1) } 50%{ transform: scale(1.18) } }
    @keyframes pop { 0%{ transform: scale(1) } 40%{ transform: scale(1.08) } 100%{ transform: scale(1) } }
    .floaty { animation: floaty 2.6s infinite ease-in-out; }
    .wobble { animation: wobble 0.9s infinite ease-in-out; }
    .boing  { animation: boing 1.1s infinite ease-in-out; }
    .pop { animation: pop .28s ease-out; }

    .bubble {
      display: none;
      background: #FFF1F2;
      border: 2px solid #FECDD3;
      color: #9F1239;
      padding: 14px 14px;
      border-radius: 18px;
      font-weight: 800;
      margin-top: 12px;
    }

    .pill {
      display: inline-block;
      padding: 6px 12px;
      border-radius: 999px;
      font-weight: 800;
      font-size: 13px;
      margin-top: 10px;
      background: #FCE7F3;
      color: #9D174D;
    }

    .mini-panel {
      background: #F8FAFC;
      border: 2px dashed #CBD5E1;
      border-radius: 18px;
      padding: 14px;
      margin-top: 12px;
      text-align: left;
    }

    .timer {
      font-size: 34px;
      font-weight: 900;
      margin-top: 10px;
      color: #0F172A;
      min-height: 44px;
      text-align:center;
    }

    .progressWrap{
      width: 100%;
      background: #E2E8F0;
      border-radius: 999px;
      overflow: hidden;
      height: 12px;
      margin-top: 12px;
    }
    .progressBar{
      height: 12px;
      width: 0%;
      background: linear-gradient(90deg, #38BDF8, #A78BFA);
      transition: width .2s linear;
    }

    .chips{ display:flex; flex-wrap:wrap; gap:10px; justify-content:center; margin-top:10px; }
    .chip{
      border: 2px solid #E2E8F0;
      background: #FFFFFF;
      border-radius: 999px;
      padding: 10px 12px;
      font-weight: 900;
      cursor: pointer;
      transition: transform .15s ease, border-color .15s ease, background .15s ease;
      user-select:none;
    }
    .chip:hover{ transform: translateY(-2px); }
    .chip.on{
      border-color:#DB2777;
      background:#FCE7F3;
    }

    .input, textarea, select{
      width:100%;
      font-family: 'Fredoka', sans-serif;
      font-weight: 700;
      border-radius: 16px;
      border: 2px solid #E2E8F0;
      padding: 12px 14px;
      outline: none;
      font-size: 15px;
      box-sizing: border-box;
    }
    textarea{ min-height: 92px; resize: vertical; }

    .row-2{ display:grid; grid-template-columns:1fr 1fr; gap:14px; }
    @media (max-width: 650px) { .row-2{ grid-template-columns:1fr; } }

    .note{
      color:#64748B;
      font-weight:800;
      font-size: 13px;
      margin-top:8px;
      text-align:center;
    }

    /* subtle dotted feel */
    #app-container:before{
      content:"";
      position:absolute;
      inset:-80px -30px -80px -30px;
      background-image: radial-gradient(rgba(14,165,233,0.20) 1.6px, transparent 1.6px);
      background-size: 28px 28px;
      pointer-events:none;
      opacity:.55;
      mask-image: radial-gradient(circle at 40% 20%, rgba(0,0,0,1), rgba(0,0,0,0.15) 70%);
    }
  </style>
</head>

<body>
  <div id="app-container"></div>

  <script>
    const container = document.getElementById('app-container');

    // ---- timer safety (clear all timeouts/intervals on navigation) ----
    const ACTIVE = { t: [], i: [] };
    function safeTimeout(fn, ms){ const id = setTimeout(fn, ms); ACTIVE.t.push(id); return id; }
    function safeInterval(fn, ms){ const id = setInterval(fn, ms); ACTIVE.i.push(id); return id; }
    function clearAllTimers(){
      while(ACTIVE.t.length) clearTimeout(ACTIVE.t.pop());
      while(ACTIVE.i.length) clearInterval(ACTIVE.i.pop());
    }
    function nav(renderFn){
      clearAllTimers();
      renderFn();
      window.scrollTo({ top: 0, behavior: "smooth" });
    }

    // ---- illustration map (from your new set) ----
    const IMG = {
      // home
      homeHappening: "assets/embarrassed/emb_02.png",
      homeTools:     "assets/embarrassed/emb_03.png",

      // behaviors
      bHide:   "assets/embarrassed/emb_06.png",
      bLaugh:  "assets/embarrassed/emb_07.png",
      bFreeze: "assets/embarrassed/emb_08.png",
      bRun:    "assets/embarrassed/emb_05.png",

      // consequences
      cAvoid:    "assets/embarrassed/emb_11.png",
      cTangled:  "assets/embarrassed/emb_12.png",
      cMisread:  "assets/embarrassed/emb_10.png",
      cHot:      "assets/embarrassed/emb_09.png",

      // tools
      tCoolDown: "assets/embarrassed/emb_13.png",
      tReplay:   "assets/embarrassed/emb_04.png",
      tBrave:    "assets/embarrassed/emb_01.png",
      tFixIt:    "assets/embarrassed/emb_06.png",
      tShapeFit: "assets/embarrassed/emb_14.png",
      tAskHelp:  "assets/embarrassed/emb_16.png"
    };

    function safeImg(src, cls){
      return '<img src="' + src + '" class="sticker-img ' + (cls||"") + '" alt="">';
    }

    function showHome(){
      container.innerHTML = `
        <h1 class="title">Understanding <span class="accent-title">Embarrassed</span></h1>
        <p class="subtitle">Embarrassed is when you feel “Uh‑oh… everyone saw!” and your cheeks get hot.<br><span style="font-weight:900;">It doesn’t mean you’re weak—it means your brain is protecting you.</span></p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#F472B6;">
            ${safeImg(IMG.homeHappening, "floaty")}
            <div class="card-title">What’s happening?</div>
            <p class="card-desc">A small mistake can feel huge. Your brain turns on a “spotlight” and your body wants to hide.</p>
            <div class="pill">Hot cheeks</div>
            <div class="pill" style="margin-left:8px;">Tummy flip</div>
            <div class="pill" style="margin-left:8px;">Freeze moment</div>
            <div style="margin-top:10px;">
              <span class="pill" style="background:#E0F2FE;color:#075985;">Being watched</span>
              <span class="pill" style="background:#E0F2FE;color:#075985;margin-left:8px;">Small mistake</span>
              <span class="pill" style="background:#E0F2FE;color:#075985;margin-left:8px;">New situation</span>
            </div>
            <button class="btn btn-pink" onclick="nav(showReactions)">See Behaviors</button>
          </div>

          <div class="white-card" style="border-bottom-color:#7C3AED;">
            ${safeImg(IMG.homeTools, "floaty")}
            <div class="card-title">Comfort Tools</div>
            <p class="card-desc">Science-backed ways to cool the “spotlight” and feel steady again.</p>
            <button class="btn btn-violet" onclick="nav(showSolutions)">Show Comfort Tools</button>
          </div>
        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">← Back to Menu</a>
        </div>
      `;
    }

    function showReactions(){
      container.innerHTML = `
        <button class="btn-back" onclick="nav(showHome)">← Back</button>
        <h1 class="title accent-title">How Do I Act When I’m Embarrassed?</h1>
        <p class="subtitle" style="color:#DB2777; font-weight:800;">These are clues your body feels “spotlight pressure.”</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#F9A8D4;">
            ${safeImg(IMG.bHide, "floaty")}
            <div class="card-title">I Hide</div>
            <p class="card-desc">I cover my face or look down.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#F9A8D4;">
            ${safeImg(IMG.bLaugh, "boing")}
            <div class="card-title">I Laugh Nervously</div>
            <p class="card-desc">I smile even if I don’t feel okay.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#F9A8D4;">
            ${safeImg(IMG.bFreeze, "wobble")}
            <div class="card-title">I Freeze</div>
            <p class="card-desc">My body gets stiff and my words disappear.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#F9A8D4;">
            ${safeImg(IMG.bRun, "floaty")}
            <div class="card-title">I Want to Escape</div>
            <p class="card-desc">I try to leave fast or “disappear.”</p>
          </div>
        </div>

        <div class="white-card" style="margin-top:26px; border-bottom-color:#7C3AED;">
          <p style="font-weight:900; font-size:20px; color:#5B21B6; margin:0;">What happens if I get stuck in this feeling?</p>
          <button class="btn btn-violet" style="width:auto; margin-top:14px;" onclick="nav(showConsequences)">See Consequences ➔</button>
        </div>
      `;
    }

    function showConsequences(){
      container.innerHTML = `
        <button class="btn-back" onclick="nav(showReactions)">← Back</button>
        <h1 class="title accent-title">When Embarrassed Takes Over…</h1>
        <p class="subtitle">The feeling can shrink your bravery—even when you did nothing wrong.</p>

        <div class="grid-2">
          <div class="white-card" style="border-bottom-color:#FDA4AF;">
            ${safeImg(IMG.cAvoid, "floaty")}
            <div class="card-title">I Avoid Trying Again</div>
            <p class="card-desc">I skip things I used to enjoy.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#FDA4AF;">
            ${safeImg(IMG.cTangled, "wobble")}
            <div class="card-title">My Brain Feels Tangled</div>
            <p class="card-desc">Hard to think or speak clearly.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#FDA4AF;">
            ${safeImg(IMG.cMisread, "floaty")}
            <div class="card-title">People Misread Me</div>
            <p class="card-desc">Others may think I’m “fine” or “rude” when I’m really embarrassed.</p>
          </div>

          <div class="white-card" style="border-bottom-color:#FDA4AF;">
            ${safeImg(IMG.cHot, "boing")}
            <div class="card-title">Body Heat Alarm</div>
            <p class="card-desc">Hot cheeks, racing heart, shaky energy.</p>
          </div>
        </div>

        <div class="white-card" style="margin-top:26px; border-bottom-color:#22C55E;">
          <p style="font-weight:900; font-size:20px; color:#166534; margin:0;">Good news: we can cool the spotlight and rebuild bravery.</p>
          <button class="btn btn-teal" style="width:auto; margin-top:14px;" onclick="nav(showSolutions)">Go to Comfort Tools ➔</button>
        </div>
      `;
    }

    // ---------- TOOLS (6) ----------
    let resetRunning = false;
    let resetLeft = 60;
    let resetTimer = null;

    function showSolutions(){
      container.innerHTML = `
        <button class="btn-back" onclick="nav(showHome)">← Back to Start</button>
        <h1 class="title accent-title">Comfort Tools</h1>
        <p class="subtitle">Each tool helps your brain feel safe again—so embarrassment doesn’t boss you around.</p>

        <div style="display:flex; flex-direction:column; gap:26px; margin-top:18px;">

          <!-- TOOL 1: 60s reset -->
          <div class="white-card" style="border-bottom-color:#0EA5E9;">
            ${safeImg(IMG.tCoolDown, "floaty")}
            <div class="card-title" style="color:#0EA5E9;">1‑Minute Cool‑Down (60s)</div>
            <p class="card-desc">Why it helps: slow breathing + steady counting tells your body, “I’m safe now.”</p>

            <div class="timer" id="resetClock">60</div>
            <div class="progressWrap"><div class="progressBar" id="resetBar"></div></div>

            <div class="row-2" style="margin-top:12px;">
              <button class="btn btn-sky" id="resetStart" onclick="toggleReset()">Start / Pause</button>
              <button class="btn btn-indigo" onclick="resetReset()">Reset</button>
            </div>
            <div class="note" id="resetHint">Breathe in… breathe out… shoulders down.</div>
          </div>

          <!-- TOOL 2: replay kindly -->
          <div class="white-card" style="border-bottom-color:#7C3AED;">
            ${safeImg(IMG.tReplay, "boing")}
            <div class="card-title" style="color:#7C3AED;">Kind Replay (Director Voice)</div>
            <p class="card-desc">Why it helps: changing the story reduces shame and builds resilience.</p>

            <div class="mini-panel" id="replayPanel">
              <div class="pill">Step 1</div>
              <div style="font-weight:900; font-size:18px; margin-top:10px;" id="replayLine">Name what happened (no blame).</div>
              <div style="color:#64748B; margin-top:6px;" id="replayHelp">Example: “I dropped my papers.”</div>
            </div>
            <button class="btn btn-violet" onclick="nextReplay()">Next Line</button>
          </div>

          <!-- TOOL 3: tiny brave move -->
          <div class="white-card" style="border-bottom-color:#D97706;">
            ${safeImg(IMG.tBrave, "floaty")}
            <div class="card-title" style="color:#D97706;">Tiny Brave Move</div>
            <p class="card-desc">Why it helps: a small action teaches your brain you can handle the moment.</p>

            <div class="mini-panel" style="text-align:center;">
              <div class="pill" id="bravePill">Pick 1</div>
              <div style="font-weight:900; font-size:20px; margin-top:10px;" id="braveLine">Look up for 2 seconds.</div>
              <div style="color:#64748B; margin-top:6px;" id="braveHelp">Small is powerful.</div>
            </div>
            <button class="btn btn-amber" onclick="newBrave()">Give me another</button>
          </div>

          <!-- TOOL 4: fix-it move -->
          <div class="white-card" style="border-bottom-color:#E11D48;">
            ${safeImg(IMG.tFixIt, "wobble")}
            <div class="card-title" style="color:#E11D48;">Fix‑It Move (Face Saver)</div>
            <p class="card-desc">Why it helps: one small repair turns “uh‑oh” into “I handled it.”</p>

            <div class="mini-panel" id="fixPanel" style="text-align:center;">
              <div style="font-weight:900; font-size:18px;">Try this:</div>
              <div style="margin-top:8px; font-weight:900; font-size:18px;" id="fixLine">Pick up one thing.</div>
              <div style="color:#64748B; margin-top:6px;">You don’t need perfect. You need progress.</div>
            </div>
            <button class="btn btn-rose" onclick="doFix()">Do a Fix‑It</button>
          </div>

          <!-- TOOL 5: square peg / square hole -->
          <div class="white-card" style="border-bottom-color:#0D9488;">
            ${safeImg(IMG.tShapeFit, "floaty")}
            <div class="card-title" style="color:#0D9488;">Shape‑Fit Reminder</div>
            <p class="card-desc">Why it helps: sometimes the problem is the fit—not you. Try a different way.</p>

            <div class="mini-panel" id="fitPanel" style="text-align:center;">
              <div class="pill" id="fitStep">1</div>
              <div style="font-weight:900; font-size:18px; margin-top:10px;" id="fitLine">Pause: “This is a learning moment.”</div>
              <div style="color:#64748B; margin-top:6px;" id="fitHelp">A new attempt can fit better.</div>
            </div>
            <button class="btn btn-teal" onclick="nextFit()">Next Step</button>
          </div>

          <!-- TOOL 6: help script -->
          <div class="white-card" style="border-bottom-color:#4338CA;">
            ${safeImg(IMG.tAskHelp, "boing")}
            <div class="card-title" style="color:#4338CA;">Help Signal Script</div>
            <p class="card-desc">Why it helps: clear words get you support and reduce “spotlight” feelings fast.</p>

            <div class="row-2" style="margin-top:10px;">
              <div>
                <div style="font-weight:900; margin-bottom:8px;">Who can help?</div>
                <select id="helpWho" class="input">
                  <option value="">Choose one…</option>
                  <option>Mom</option>
                  <option>Dad</option>
                  <option>Teacher</option>
                  <option>Coach</option>
                  <option>Friend</option>
                </select>
                <div style="font-weight:900; margin:10px 0 8px 0;">Or type a name:</div>
                <input id="helpWhoText" class="input" placeholder="Example: Ms. Rivera" />
              </div>
              <div>
                <div style="font-weight:900; margin-bottom:8px;">What do you need?</div>
                <select id="helpNeed" class="input">
                  <option value="">Choose one…</option>
                  <option>a quick break</option>
                  <option>a calm place</option>
                  <option>help fixing it</option>
                  <option>more time</option>
                  <option>a simple step</option>
                </select>
                <div style="font-weight:900; margin:10px 0 8px 0;">Or type your need:</div>
                <input id="helpNeedText" class="input" placeholder="Example: a 2‑minute break" />
              </div>
            </div>

            <div class="row-2" style="margin-top:12px;">
              <button class="btn btn-indigo" onclick="buildScript()">Build Script</button>
              <button class="btn btn-sky" onclick="copyScript()">Copy</button>
            </div>
            <button class="btn btn-rose" style="margin-top:12px;" onclick="clearScript()">Clear</button>

            <div class="mini-panel" style="margin-top:12px; text-align:center;">
              <div style="font-weight:900; font-size:18px;" id="scriptOut">Hi _____. I feel embarrassed. Can you help me by _____?</div>
              <div class="note" id="copyNote" style="display:none;">Copied!</div>
            </div>
          </div>

        </div>

        <div style="text-align:center; margin-top:26px;">
          <a href="index.html" style="color:#94A3B8; text-decoration:none; font-weight:800;">← Back to Menu</a>
        </div>
      `;

      resetToolStates();
    }

    // ---- TOOL 1: 60s cooldown ----
    function updateResetUI(){
      const clock = document.getElementById('resetClock');
      const bar = document.getElementById('resetBar');
      if(!clock || !bar) return;
      clock.textContent = resetLeft;
      const pct = Math.max(0, Math.min(100, ((60 - resetLeft) / 60) * 100));
      bar.style.width = pct + "%";
    }
    function toggleReset(){
      const btn = document.getElementById('resetStart');
      if(!btn) return;
      btn.classList.add('pop'); safeTimeout(()=>btn.classList.remove('pop'), 260);

      if(resetRunning){
        resetRunning = false;
        if(resetTimer){ clearInterval(resetTimer); resetTimer = null; }
        return;
      }
      resetRunning = true;
      if(!resetTimer){
        resetTimer = safeInterval(() => {
          if(!resetRunning) return;
          resetLeft--;
          updateResetUI();
          if(resetLeft <= 0){
            resetLeft = 0;
            resetRunning = false;
            if(resetTimer){ clearInterval(resetTimer); resetTimer = null; }
            const hint = document.getElementById('resetHint');
            if(hint) hint.textContent = "Nice. Your body is cooling down.";
          }
        }, 1000);
      }
    }
    function resetReset(){
      resetRunning = false;
      if(resetTimer){ clearInterval(resetTimer); resetTimer = null; }
      resetLeft = 60;
      updateResetUI();
      const hint = document.getElementById('resetHint');
      if(hint) hint.textContent = "Breathe in… breathe out… shoulders down.";
    }

    // ---- TOOL 2: kind replay ----
    const replaySteps = [
      { pill:"Step 1", line:"Name what happened (no blame).", help:"Example: “I tripped.” “I forgot a word.”" },
      { pill:"Step 2", line:"Say a kind truth.", help:"Example: “Everyone makes mistakes.”" },
      { pill:"Step 3", line:"Pick a repair (tiny).", help:"Example: “I’ll try again,” or “I’ll fix one thing.”" },
      { pill:"Step 4", line:"Move on with bravery.", help:"Example: “I’m still okay.”" }
    ];
    let replayIndex = 0;
    function nextReplay(){
      const panel = document.getElementById('replayPanel');
      if(!panel) return;
      replayIndex = (replayIndex + 1) % replaySteps.length;
      panel.querySelector('.pill').textContent = replaySteps[replayIndex].pill;
      document.getElementById('replayLine').textContent = replaySteps[replayIndex].line;
      document.getElementById('replayHelp').textContent = replaySteps[replayIndex].help;
    }

    // ---- TOOL 3: tiny brave move ----
    const braveMoves = [
      { pill:"Pick 1", line:"Look up for 2 seconds.", help:"Tiny bravery is real bravery." },
      { pill:"Pick 1", line:"Take one slow breath.", help:"Your body calms first." },
      { pill:"Pick 1", line:"Say: “Oops—my bad.”", help:"Simple words shrink the spotlight." },
      { pill:"Pick 1", line:"Ask one question.", help:"Curiosity beats shame." },
      { pill:"Pick 1", line:"Do one small step back in.", help:"Return gently." }
    ];
    let braveIndex = 0;
    function newBrave(){
      braveIndex = (braveIndex + 1) % braveMoves.length;
      document.getElementById('bravePill').textContent = braveMoves[braveIndex].pill;
      document.getElementById('braveLine').textContent = braveMoves[braveIndex].line;
      document.getElementById('braveHelp').textContent = braveMoves[braveIndex].help;
    }

    // ---- TOOL 4: fix-it ----
    const fixIdeas = [
      "Pick up one thing.",
      "Say: “Let me try again.”",
      "Take a sip of water.",
      "Ask: “Can you show me once?”",
      "Put it back neatly."
    ];
    function doFix(){
      const line = document.getElementById('fixLine');
      if(!line) return;
      line.textContent = fixIdeas[Math.floor(Math.random()*fixIdeas.length)];
      line.classList.add('pop'); safeTimeout(()=>line.classList.remove('pop'), 260);
    }

    // ---- TOOL 5: shape-fit steps ----
    const fitSteps = [
      { step:"1", line:"Pause: “This is a learning moment.”", help:"Not a forever moment." },
      { step:"2", line:"Try a smaller piece.", help:"One tiny step first." },
      { step:"3", line:"Try a different way.", help:"New angle, new try." },
      { step:"4", line:"Ask for a clue.", help:"Help makes fits faster." }
    ];
    let fitIndex = 0;
    function nextFit(){
      fitIndex = (fitIndex + 1) % fitSteps.length;
      document.getElementById('fitStep').textContent = fitSteps[fitIndex].step;
      document.getElementById('fitLine').textContent = fitSteps[fitIndex].line;
      document.getElementById('fitHelp').textContent = fitSteps[fitIndex].help;
    }

    // ---- TOOL 6: help script ----
    function buildScript(){
      const whoSel = (document.getElementById('helpWho')||{}).value || "";
      const whoTxt = (document.getElementById('helpWhoText')||{}).value || "";
      const needSel = (document.getElementById('helpNeed')||{}).value || "";
      const needTxt = (document.getElementById('helpNeedText')||{}).value || "";
      const who = (whoTxt.trim() || whoSel.trim() || "____");
      const need = (needTxt.trim() || needSel.trim() || "_____");
      const out = document.getElementById('scriptOut');
      if(out){
        out.textContent = `Hi ${who}. I feel embarrassed. Can you help me by ${need}?`;
        out.classList.add('pop'); safeTimeout(()=>out.classList.remove('pop'), 260);
      }
    }
    function clearScript(){
      const out = document.getElementById('scriptOut');
      if(out) out.textContent = "Hi _____. I feel embarrassed. Can you help me by _____?";
      const note = document.getElementById('copyNote');
      if(note) note.style.display = "none";
      const ids = ["helpWho","helpWhoText","helpNeed","helpNeedText"];
      ids.forEach(id => {
        const el = document.getElementById(id);
        if(!el) return;
        if(el.tagName === "SELECT") el.value = "";
        else el.value = "";
      });
    }
    async function copyScript(){
      const out = document.getElementById('scriptOut');
      const note = document.getElementById('copyNote');
      if(!out) return;
      try{
        await navigator.clipboard.writeText(out.textContent);
        if(note){ note.style.display="block"; safeTimeout(()=>note.style.display="none", 1200); }
      }catch(e){
        // silent fallback
        if(note){ note.style.display="block"; note.textContent="Copy not supported here"; safeTimeout(()=>{note.style.display="none"; note.textContent="Copied!";}, 1200); }
      }
    }

    function resetToolStates(){
      // tool 1
      resetRunning = false;
      resetLeft = 60;
      if(resetTimer){ clearInterval(resetTimer); resetTimer = null; }
      updateResetUI();

      // tool 2/3/5 indices
      replayIndex = 0;
      braveIndex = 0;
      fitIndex = 0;
    }

    showHome();
  </script>
</body>
</html>

