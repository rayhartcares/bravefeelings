<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Brave Feelings Lab</title>

  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600;700;800&display=swap" rel="stylesheet">

  <style>
    body { font-family: 'Fredoka', sans-serif; background-color: #F0F9FF; }
    .hero-bg { background-image: radial-gradient(#bae6fd 2px, transparent 2px); background-size: 30px 30px; }
    .card-hover { transition: transform 0.3s ease, box-shadow 0.3s ease; }
    .card-hover:hover { transform: translateY(-5px); box-shadow: 0 15px 30px -5px rgba(0, 0, 0, 0.12); }

    @keyframes shakeX {
      0% { transform: translateX(0); }
      20% { transform: translateX(-7px); }
      40% { transform: translateX(7px); }
      60% { transform: translateX(-6px); }
      80% { transform: translateX(6px); }
      100% { transform: translateX(0); }
    }
    .shake { animation: shakeX 0.22s ease-in-out; }
  </style>
</head>

<body class="min-h-screen hero-bg flex flex-col items-center justify-center p-6">

  <!-- LOCK SCREEN -->
  <div id="lockScreen" style="
    position: fixed;
    inset: 0;
    background: #F0F9FF;
    display: none;
    align-items: center;
    justify-content: center;
    z-index: 9999;
    padding: 18px;
  ">
    <div id="lockCard" style="
      background: white;
      padding: 34px 28px;
      border-radius: 26px;
      max-width: 440px;
      width: 100%;
      text-align: center;
      box-shadow: 0 20px 40px rgba(0,0,0,0.12);
      font-family: 'Fredoka', sans-serif;
      border-bottom: 8px solid #38BDF8;
    ">
      <div style="font-size:54px; margin-bottom: 6px;">üß∏</div>

      <h2 style="font-size: 28px; font-weight: 900; margin: 0 0 8px 0; color:#0F172A;">
        Welcome to Brave Feelings
      </h2>
      <p style="color:#64748B; font-size:16px; margin: 0 0 18px 0; line-height:1.4;">
        Enter your access code to open the Calm-Down App.
      </p>

      <input
        id="accessInput"
        inputmode="numeric"
        autocomplete="one-time-code"
        placeholder="Access code"
        style="
          width: 100%;
          padding: 14px 14px;
          font-size: 18px;
          border-radius: 16px;
          border: 2px solid #E2E8F0;
          margin-bottom: 14px;
          font-family: 'Fredoka', sans-serif;
          font-weight: 800;
          outline: none;
          text-align: center;
          letter-spacing: 2px;
        "
      />

      <button
        id="unlockBtn"
        type="button"
        style="
          width: 100%;
          padding: 14px 16px;
          border-radius: 18px;
          background: linear-gradient(135deg, #38BDF8, #0EA5E9);
          color: white;
          font-size: 18px;
          font-weight: 900;
          border: none;
          cursor: pointer;
          box-shadow: 0 10px 20px rgba(2,132,199,0.22);
        "
      >
        Open App
      </button>

      <p id="lockError" style="
        color:#DC2626;
        font-weight:900;
        margin-top:14px;
        display:none;
      ">
        Wrong access code. Please try again.
      </p>

      <p style="color:#94A3B8; font-weight:800; margin-top:14px; font-size:13px;">
        Tip: Press Enter after typing your code.
      </p>
    </div>
  </div>

  <!-- MAIN MENU -->
  <div class="text-center max-w-2xl mx-auto mb-12">
    <div class="w-32 h-32 mx-auto mb-6 bg-white rounded-full p-1 shadow-xl">
      <img
        src="assets/benne-hart-avatar.png"
        alt="Benne Hart"
        class="w-full h-full object-cover rounded-full"
        onerror="this.onerror=null; this.src='https://api.dicebear.com/7.x/avataaars/svg?seed=Benne';"
      >
    </div>

    <h1 class="text-5xl md:text-6xl font-extrabold text-slate-800 mb-3">
      Hi, I'm Benne Hart! üêª
    </h1>
    <p class="text-2xl text-slate-600">How is your heart feeling right now?</p>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 max-w-5xl w-full px-4">

    <a href="./canva.html" class="block bg-white rounded-3xl p-8 border-b-8 border-red-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üò°</span>
        <span class="bg-red-500 text-white px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Angry</h2>
      <p class="text-slate-500 text-lg">I feel like a volcano ready to explode.</p>
    </a>
<a href="worry-gate.html" class="block bg-white rounded-3xl p-8 border-b-8 border-cyan-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group md:col-span-2 lg:col-span-1">
                 <div class="absolute top-0 right-0 bg-cyan-400 text-white text-xs font-bold px-3 py-1 rounded-bl-lg uppercase">Add-On</div>
                 
                <div class="flex justify-between items-start mb-4">
                    <span class="text-6xl group-hover:scale-110 transition-transform">üõ°Ô∏è</span>
                    <span class="bg-cyan-100 text-cyan-700 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide flex items-center gap-1">
                        <span>üîí UNLOCK</span>
                    </span>
                </div>
                <h2 class="text-3xl font-extrabold text-slate-800 mb-1">The Worry Shrinker Program</h2>
                <p class="text-xs text-cyan-600 font-bold uppercase tracking-wider mb-2">Premium Mini-Program</p>
                <p class="text-slate-500 text-lg">A brand new special program to help you boss back your anxiety bugs!</p>
            </a>
           
    <a href="./frustrated.html" class="block bg-white rounded-3xl p-8 border-b-8 border-orange-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üò§</span>
        <span class="bg-orange-100 text-orange-700 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Frustrated</h2>
      <p class="text-slate-500 text-lg">I'm trying hard but it's not working.</p>
    </a>

    <a href="./sad.html" class="block bg-white rounded-3xl p-8 border-b-8 border-blue-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üò¢</span>
        <span class="bg-blue-100 text-blue-700 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Sad</h2>
      <p class="text-slate-500 text-lg">I feel heavy, tired, or want to cry.</p>
    </a>

    <a href="./worried.html" class="block bg-white rounded-3xl p-8 border-b-8 border-purple-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üò∞</span>
        <span class="bg-purple-100 text-purple-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Worried</h2>
      <p class="text-slate-500 text-lg">I have butterflies in my tummy.</p>
    </a>

    <a href="./envious.html" class="block bg-white rounded-3xl p-8 border-b-8 border-green-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üòí</span>
        <span class="bg-green-100 text-green-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Envious</h2>
      <p class="text-slate-500 text-lg">I want what someone else has.</p>
    </a>

    <a href="./arrogant.html" class="block bg-white rounded-3xl p-8 border-b-8 border-yellow-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üòè</span>
        <span class="bg-yellow-100 text-yellow-900 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Arrogant</h2>
      <p class="text-slate-500 text-lg">I feel like I'm better than others.</p>
    </a>

    <a href="./overwhelmed.html" class="block bg-white rounded-3xl p-8 border-b-8 border-sky-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üòµ‚Äçüí´</span>
        <span class="bg-sky-100 text-sky-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Overwhelmed</h2>
      <p class="text-slate-500 text-lg">Too much at once‚Äîmy brain needs smaller steps.</p>
    </a>

    <a href="./embarrassed.html" class="block bg-white rounded-3xl p-8 border-b-8 border-pink-400 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üò≥</span>
        <span class="bg-pink-100 text-pink-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Embarrassed</h2>
      <p class="text-slate-500 text-lg">My cheeks get hot and I want to hide.</p>
    </a>

    <a href="./shy.html" class="block bg-white rounded-3xl p-8 border-b-8 border-indigo-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üòä</span>
        <span class="bg-indigo-100 text-indigo-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Shy</h2>
      <p class="text-slate-500 text-lg">I want to talk, but my body feels nervous.</p>
    </a>

    <a href="./scared.html" class="block bg-white rounded-3xl p-8 border-b-8 border-violet-300 card-hover cursor-pointer shadow-lg relative overflow-hidden group">
      <div class="flex justify-between items-start mb-4">
        <span class="text-6xl group-hover:scale-110 transition-transform">üò®</span>
        <span class="bg-violet-100 text-violet-800 px-4 py-1 rounded-full text-sm font-extrabold uppercase tracking-wide">Start</span>
      </div>
      <h2 class="text-3xl font-extrabold text-slate-800 mb-2">I am Scared</h2>
      <p class="text-slate-500 text-lg">My body thinks something bad might happen.</p>
    </a>

  </div>

  <div class="mt-10 text-center">
    <button
      id="clearAccessBtn"
      class="text-slate-500 font-extrabold text-sm underline decoration-slate-300 hover:text-slate-700"
      type="button"
    >
      Clear Saved Access (force password prompt)
    </button>
  </div>

  <div class="mt-10 text-slate-400 font-extrabold text-sm text-center">
    Brave Feelings Lab ¬© 2025
  </div>

<script>
  /* ============================
     PASSWORD LOCK + IDLE WARNING/LOGOUT
     Buyer-friendly for Etsy:
     - NO session cap (no forced logout by time)
     - Warn after 15 minutes of no activity
     - Logout after 20 minutes of no activity
     ============================ */

  const ACCESS_CODE = "5511"; // change password here

  // Idle policy (no activity)
  const IDLE_WARN_MS   = 15 * 60 * 1000; // warn after 15 minutes idle
  const IDLE_LOGOUT_MS = 20 * 60 * 1000; // logout after 20 minutes idle
  //const IDLE_WARN_MS   = 15 * 1000;  // test 15 seconds 
  //const IDLE_LOGOUT_MS = 20 * 1000;  // test 20 seconds


  // Storage: keep a simple "logged in" flag so refresh doesn't instantly relock,
  // but idle policy will still force logout.
  const SESSION_KEY = "bf_access_session_idle_v1";

  // Legacy cleanup (from older builds)
  const LEGACY_KEY = "bf_access_token_v1";
  const LEGACY_KEY2 = "bf_access_session_v1";

  function normalizeCode(s){
    return (s || "").toString().replace(/\D+/g, "");
  }
  function expectedToken(){
    return "ok:" + normalizeCode(ACCESS_CODE);
  }

  function showLock(show){
    const lock = document.getElementById("lockScreen");
    if(!lock) return;
    lock.style.display = show ? "flex" : "none";
  }

  function showError(show){
    const err = document.getElementById("lockError");
    if(!err) return;
    err.style.display = show ? "block" : "none";
  }

  function shakeCard(){
    const card = document.getElementById("lockCard");
    if(!card) return;
    card.classList.remove("shake");
    void card.offsetWidth;
    card.classList.add("shake");
    setTimeout(() => card.classList.remove("shake"), 260);
  }

  // --------- basic "logged-in" persistence ----------
  function clearSession(){
    localStorage.removeItem(SESSION_KEY);
  }

  function saveSession(){
    localStorage.setItem(SESSION_KEY, JSON.stringify({
      token: expectedToken()
    }));
  }

  function loadSession(){
    try{
      const raw = localStorage.getItem(SESSION_KEY);
      if(!raw) return null;
      const data = JSON.parse(raw);
      if(!data || typeof data.token !== "string") return null;
      return data;
    }catch{
      return null;
    }
  }

  function sessionIsValid(data){
    if(!data) return false;
    // if password changes, previous session becomes invalid
    return data.token === expectedToken();
  }

  // ---------- lock/unlock ----------
  let isUnlocked = false;

  function focusInputSoon(){
    const input = document.getElementById("accessInput");
    setTimeout(() => input && input.focus(), 60);
  }

  function lockNow(){
    isUnlocked = false;
    stopIdleWatch();
    hideIdleWarning();
    clearSession();
    showLock(true);
    showError(false);
    const input = document.getElementById("accessInput");
    if(input) input.value = "";
    focusInputSoon();
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  function unlockApp(){
    const input = document.getElementById("accessInput");
    const typed = normalizeCode(input?.value);
    const expected = normalizeCode(ACCESS_CODE);

    if(typed && typed === expected){
      showError(false);
      showLock(false);
      isUnlocked = true;

      saveSession();
      startIdleWatch();
      resetIdleTimers();
    }else{
      showError(true);
      shakeCard();
    }
  }

  // ---------- idle warning UI ----------
  let warnTimer = null;
  let logoutTimer = null;
  let countdownInterval = null;
  let idleLogoutAt = 0;
  let listenersAttached = false;

  function ensureIdleWarningUI(){
    if(document.getElementById("bfIdleWarnOverlay")) return;

    const style = document.createElement("style");
    style.textContent = `
      @keyframes bfFlash {
        0%, 100% { transform: scale(1); box-shadow: 0 20px 40px rgba(0,0,0,0.12); }
        50% { transform: scale(1.02); box-shadow: 0 28px 60px rgba(220,38,38,0.22); }
      }
    `;
    document.head.appendChild(style);

    const overlay = document.createElement("div");
    overlay.id = "bfIdleWarnOverlay";
    overlay.style.cssText = `
      position: fixed;
      inset: 0;
      display: none;
      align-items: center;
      justify-content: center;
      z-index: 99999;
      padding: 18px;
      background: rgba(15, 23, 42, 0.35);
      backdrop-filter: blur(2px);
    `;

    overlay.innerHTML = `
      <div id="bfIdleWarnCard" style="
        background: white;
        width: 100%;
        max-width: 520px;
        border-radius: 24px;
        padding: 22px 20px;
        font-family: 'Fredoka', sans-serif;
        border-bottom: 8px solid #DC2626;
        animation: bfFlash 0.9s ease-in-out infinite;
        text-align: center;
      ">
        <div style="font-size:44px; margin-bottom: 6px;">‚è≥</div>
        <div style="font-size:22px; font-weight:900; color:#0F172A; margin-bottom: 6px;">
          Inactive warning
        </div>
        <div style="color:#475569; font-weight:800; font-size:15px; line-height:1.35; margin-bottom: 10px;">
          No activity detected. You will be logged out in
          <span id="bfIdleCountdown" style="color:#DC2626; font-weight:900;">05:00</span>
          unless activity resumes.
        </div>
        <button id="bfStayBtn" type="button" style="
          width: 100%;
          padding: 12px 14px;
          border-radius: 16px;
          background: linear-gradient(135deg, #22C55E, #16A34A);
          color: white;
          font-size: 16px;
          font-weight: 900;
          border: none;
          cursor: pointer;
          box-shadow: 0 10px 20px rgba(22,163,74,0.18);
        ">
          Stay logged in
        </button>
        <div style="color:#94A3B8; font-weight:800; font-size:12px; margin-top:10px;">
          Any mouse/keyboard/touch/scroll activity will cancel this warning.
        </div>
      </div>
    `;

    document.body.appendChild(overlay);

    const stayBtn = document.getElementById("bfStayBtn");
    if(stayBtn){
      stayBtn.addEventListener("click", () => {
        if(!isUnlocked) return;
        resetIdleTimers();
      });
    }
  }

  function showIdleWarning(){
    if(!isUnlocked) return;
    ensureIdleWarningUI();
    const overlay = document.getElementById("bfIdleWarnOverlay");
    if(overlay) overlay.style.display = "flex";
    startCountdown();
  }

  function hideIdleWarning(){
    const overlay = document.getElementById("bfIdleWarnOverlay");
    if(overlay) overlay.style.display = "none";
    stopCountdown();
  }

  function formatMMSS(ms){
    const s = Math.max(0, Math.ceil(ms / 1000));
    const mm = String(Math.floor(s / 60)).padStart(2, "0");
    const ss = String(s % 60).padStart(2, "0");
    return `${mm}:${ss}`;
  }

  function startCountdown(){
    stopCountdown();
    const tick = () => {
      const remain = idleLogoutAt - Date.now();
      const el = document.getElementById("bfIdleCountdown");
      if(el) el.textContent = formatMMSS(remain);
      if(remain <= 0) stopCountdown();
    };
    tick();
    countdownInterval = setInterval(tick, 250);
  }

  function stopCountdown(){
    if(countdownInterval) clearInterval(countdownInterval);
    countdownInterval = null;
  }

  function resetIdleTimers(){
    if(!isUnlocked) return;

    hideIdleWarning();

    if(warnTimer) clearTimeout(warnTimer);
    if(logoutTimer) clearTimeout(logoutTimer);

    idleLogoutAt = Date.now() + IDLE_LOGOUT_MS;

    warnTimer = setTimeout(() => {
      if(!isUnlocked) return;
      showIdleWarning();
    }, IDLE_WARN_MS);

    logoutTimer = setTimeout(() => {
      lockNow();
    }, IDLE_LOGOUT_MS);
  }

  function onAnyActivity(){
    if(!isUnlocked) return;
    resetIdleTimers();
  }

  function startIdleWatch(){
    if(listenersAttached) return;
    listenersAttached = true;

    const events = ["mousemove", "mousedown", "keydown", "touchstart", "scroll", "click"];
    events.forEach(evt => window.addEventListener(evt, onAnyActivity, { passive: true }));

    window.addEventListener("focus", checkIdleNow);
    document.addEventListener("visibilitychange", checkIdleNow);
  }

  function stopIdleWatch(){
    if(!listenersAttached) return;
    listenersAttached = false;

    const events = ["mousemove", "mousedown", "keydown", "touchstart", "scroll", "click"];
    events.forEach(evt => window.removeEventListener(evt, onAnyActivity, { passive: true }));

    window.removeEventListener("focus", checkIdleNow);
    document.removeEventListener("visibilitychange", checkIdleNow);

    if(warnTimer) clearTimeout(warnTimer);
    if(logoutTimer) clearTimeout(logoutTimer);
    warnTimer = null;
    logoutTimer = null;
  }

  function checkIdleNow(){
    if(!isUnlocked) return;

    const now = Date.now();
    if(idleLogoutAt && now >= idleLogoutAt){
      lockNow();
      return;
    }

    const warnAt = idleLogoutAt - (IDLE_LOGOUT_MS - IDLE_WARN_MS);
    if(now >= warnAt){
      showIdleWarning();
    }
  }

  // ---------- gate on load ----------
  function enforceGate(){
    document.documentElement.style.visibility = "hidden";

    // cleanup old keys so they never interfere
    localStorage.removeItem(LEGACY_KEY);
    localStorage.removeItem(LEGACY_KEY2);

    const session = loadSession();

    if(sessionIsValid(session)){
      isUnlocked = true;
      showLock(false);
      showError(false);

      startIdleWatch();
      resetIdleTimers();
    }else{
      lockNow();
    }

    document.documentElement.style.visibility = "visible";
  }

  document.addEventListener("DOMContentLoaded", () => {
    const unlockBtn = document.getElementById("unlockBtn");
    if(unlockBtn) unlockBtn.addEventListener("click", unlockApp);

    const clearBtn = document.getElementById("clearAccessBtn");
    if(clearBtn) clearBtn.addEventListener("click", lockNow);

    const input = document.getElementById("accessInput");
    if(input){
      input.addEventListener("input", () => showError(false));
      input.addEventListener("keydown", (e) => {
        if(e.key === "Enter") unlockApp();
      });
    }

    enforceGate();
  });

  window.addEventListener("pageshow", enforceGate);
</script>




</body>
</html>
