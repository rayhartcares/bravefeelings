<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Understanding Frustration</title>

  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg: #FFF8F0;
      --ink: #2D3748;
      --muted: #718096;
      --card: #ffffff;

      --orange1:#ED8936; --orange2:#DD6B20;
      --green1:#48BB78;  --green2:#38A169;
      --blue1:#4299E1;   --blue2:#3182CE;
      --purple1:#9F7AEA; --purple2:#805AD5;
      --teal1:#38B2AC;   --teal2:#2C7A7B;
      --red1:#F56565;    --red2:#C53030;

      --sticker-size: clamp(150px, 30vw, 210px);
    }

    body{
      margin:0; padding:0;
      background:var(--bg);
      font-family:'Fredoka', system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--ink);
      display:flex;
      justify-content:center;
      min-height:100vh;
      overflow-x:hidden;
    }

    #app-container{
      width:100%;
      max-width:900px;
      padding:44px 18px;
      position:relative;
    }

    .title{
      font-size: clamp(30px, 4vw, 40px);
      font-weight: 600;
      text-align:center;
      margin: 0 0 10px;
      letter-spacing: .2px;
    }
    .orange-title{ color: var(--orange1); }
    .green-title{ color: var(--green1); }

    .sub{
      text-align:center;
      color: var(--muted);
      margin: 0 0 34px;
      font-size: 16px;
      line-height: 1.35;
    }

    .grid-2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 24px;
    }
    @media (max-width: 680px){
      .grid-2{ grid-template-columns: 1fr; }
      #app-container{ padding: 34px 14px; }
    }

    .white-card{
      background:var(--card);
      border-radius: 26px;
      padding: 28px 22px;
      box-shadow: 0 10px 24px rgba(0,0,0,0.06);
      text-align:center;
      border-bottom: 7px solid #EDF2F7;
      transition: transform .18s ease;
      position: relative;
      overflow: visible;
    }
    .white-card:hover{ transform: translateY(-4px); }

    .card-title{
      font-size: 22px;
      font-weight: 600;
      margin: 8px 0 6px;
    }
    .card-desc{
      font-size: 16px;
      color: var(--muted);
      margin: 0;
      line-height: 1.45;
    }

    .btn{
      padding: 14px 20px;
      border-radius: 16px;
      font-weight: 600;
      font-size: 18px;
      border: none;
      cursor: pointer;
      color: #fff;
      transition: transform .15s ease, filter .15s ease;
      width: 100%;
      margin-top: 16px;
      box-shadow: 0 6px 10px rgba(0,0,0,0.10);
    }
    .btn:hover{ transform: scale(1.02); filter: brightness(1.06); }

    .btn-orange{ background: linear-gradient(135deg, var(--orange1), var(--orange2)); }
    .btn-green { background: linear-gradient(135deg, var(--green1),  var(--green2)); }
    .btn-blue  { background: linear-gradient(135deg, var(--blue1),   var(--blue2)); }
    .btn-purple{ background: linear-gradient(135deg, var(--purple1), var(--purple2)); }
    .btn-teal  { background: linear-gradient(135deg, var(--teal1), var(--teal2)); }
    .btn-red   { background: linear-gradient(135deg, var(--red1), var(--red2)); }

    .btn-back{
      background:#fff;
      border: 2px solid #CBD5E0;
      color:#4A5568;
      padding: 10px 14px;
      border-radius: 14px;
      font-weight: 600;
      cursor: pointer;
      margin-bottom: 18px;
    }

    .sticker-wrap{
      display:flex;
      justify-content:center;
      align-items:center;
      margin: 2px 0 12px;
      filter: drop-shadow(0 7px 7px rgba(0,0,0,0.10));
    }
    .sticker-svg{
      width: var(--sticker-size);
      height: var(--sticker-size);
      display:block;
    }

    .hidden{ display:none !important; }
    .tb { transform-box: fill-box; transform-origin: center; }

    /* ---------- Fun, exaggerated animations ---------- */
    @keyframes floaty{
      0%,100%{ transform: translateY(0) scale(1); }
      50%{ transform: translateY(-12px) scale(1.04); }
    }
    @keyframes wiggle{
      0%{ transform: rotate(0deg) translateY(0); }
      15%{ transform: rotate(-8deg) translateY(-2px); }
      35%{ transform: rotate(10deg) translateY(1px); }
      55%{ transform: rotate(-10deg) translateY(-1px); }
      75%{ transform: rotate(6deg) translateY(1px); }
      100%{ transform: rotate(0deg) translateY(0); }
    }
    @keyframes bop{
      0%,100%{ transform: scale(1); }
      40%{ transform: scale(1.08); }
      60%{ transform: scale(0.98); }
    }
    @keyframes shakeHard{
      0%{ transform: translate(0,0) rotate(0deg); }
      20%{ transform: translate(-5px,2px) rotate(-5deg); }
      40%{ transform: translate(6px,-2px) rotate(5deg); }
      60%{ transform: translate(-6px,-1px) rotate(-6deg); }
      80%{ transform: translate(5px,2px) rotate(6deg); }
      100%{ transform: translate(0,0) rotate(0deg); }
    }

    /* Peg try-fit (home) */
    @keyframes pegTryFit{
      0%   { transform: translate(-52px, 0px) rotate(-10deg) scale(1); }
      18%  { transform: translate(-10px, 0px)  rotate(7deg)  scale(1.03); }
      28%  { transform: translate(-2px, 0px)   rotate(-12deg) scale(1.06); }
      38%  { transform: translate(-9px, -2px)  rotate(10deg)  scale(1.05); }
      52%  { transform: translate(6px, 10px)   rotate(0deg)   scale(0.98); }
      62%  { transform: translate(6px, 7px)    rotate(0deg)   scale(1.03); }
      78%  { transform: translate(6px, 10px)   rotate(0deg)   scale(1); }
      100% { transform: translate(6px, 10px)   rotate(0deg)   scale(1); }
    }
    @keyframes armFlailL{
      0%,100% { transform: rotate(-10deg); }
      20%     { transform: rotate(-44deg); }
      40%     { transform: rotate(26deg); }
      60%     { transform: rotate(-38deg); }
      80%     { transform: rotate(12deg); }
    }
    @keyframes armFlailR{
      0%,100% { transform: rotate(10deg); }
      20%     { transform: rotate(46deg); }
      40%     { transform: rotate(-22deg); }
      60%     { transform: rotate(36deg); }
      80%     { transform: rotate(-12deg); }
    }
    @keyframes popSpark{
      0%, 50%  { opacity: 0; transform: scale(0.4); }
      56%      { opacity: 1; transform: scale(1.25); }
      66%      { opacity: 0.95; transform: scale(1); }
      100%     { opacity: 0; transform: scale(0.7); }
    }

    /* Ask for clue: magnifier swoops + spark */
    @keyframes magnifierSwoop{
      0%   { transform: translate(50px,-30px) rotate(25deg) scale(0.9); opacity:0.2; }
      35%  { transform: translate(10px,-8px) rotate(0deg) scale(1); opacity:1; }
      70%  { transform: translate(6px,-4px) rotate(-8deg) scale(1.05); opacity:1; }
      100% { transform: translate(50px,-30px) rotate(25deg) scale(0.9); opacity:0.2; }
    }
    @keyframes clueSpark{
      0%, 30% { opacity:0; transform: scale(0.5); }
      40%     { opacity:1; transform: scale(1.2); }
      55%     { opacity:0.9; transform: scale(1); }
      100%    { opacity:0; transform: scale(0.7); }
    }

    /* Recharge: plug pops in/out */
    @keyframes plugIn{
      0%   { transform: translate(-40px, 10px) rotate(-10deg); }
      35%  { transform: translate(-10px, 0px) rotate(6deg); }
      55%  { transform: translate(0px, 0px) rotate(0deg); }
      100% { transform: translate(-40px, 10px) rotate(-10deg); }
    }
    @keyframes boltPop{
      0%, 40% { opacity:0; transform: scale(0.6); }
      55%     { opacity:1; transform: scale(1.25); }
      70%     { opacity:0.95; transform: scale(1); }
      100%    { opacity:0; transform: scale(0.7); }
    }

    /* Shake It Off: sticker wiggle when triggered */
    @keyframes wiggleBig{
      0%{ transform: rotate(0deg) scale(1); }
      15%{ transform: rotate(-10deg) scale(1.03); }
      35%{ transform: rotate(12deg) scale(1.05); }
      55%{ transform: rotate(-12deg) scale(1.05); }
      75%{ transform: rotate(9deg) scale(1.03); }
      100%{ transform: rotate(0deg) scale(1); }
    }

    /* Apply animations */
    .st-peg .peg     { animation: pegTryFit 2.2s infinite ease-in-out; }
    .st-peg .armL    { animation: armFlailL 2.2s infinite ease-in-out; }
    .st-peg .armR    { animation: armFlailR 2.2s infinite ease-in-out; }
    .st-peg .spark   { animation: popSpark  2.2s infinite ease-in-out; }

    .st-tools .buddy { animation: floaty 2.6s infinite ease-in-out; }
    .st-tools .bulb  { animation: bop 1.4s infinite ease-in-out; }

    .st-ask .magnifier { animation: magnifierSwoop 2.4s infinite ease-in-out; }
    .st-ask .spark { animation: clueSpark 2.4s infinite ease-in-out; }
    .st-ask .buddy { animation: floaty 2.4s infinite ease-in-out; }

    /* Only animate plug when charging class is on */
    .st-batt .plug { opacity: 0.85; }
    .charging .st-batt .plug { animation: plugIn 1.3s infinite ease-in-out; }
    .charging .st-batt .bolt { animation: boltPop 1.3s infinite ease-in-out; }

    /* Shake trigger */
    .wiggling .st-shake .buddy { animation: wiggleBig 0.35s infinite ease-in-out; }

    /* Card shaking (triggered by JS) */
    .shakingCard{ animation: shakeHard 0.35s infinite linear; }

    .practice-bubble{
      background:#EBF8FF;
      color:#2B6CB0;
      padding:14px;
      border-radius: 16px;
      text-align:center;
      display:none;
      margin-top: 10px;
      font-weight: 600;
    }

    .menu-link{
      color:#A0AEC0;
      text-decoration:none;
      font-weight:600;
    }

    .tiny-box{
      background:#F7FAFC;
      border: 2px solid #E2E8F0;
      border-radius: 16px;
      padding: 12px;
      margin-top: 10px;
      text-align: left;
      color: #4A5568;
      font-weight: 500;
    }

    .input{
      width: 100%;
      border: 2px solid #E2E8F0;
      border-radius: 14px;
      padding: 12px;
      font-size: 16px;
      font-family: inherit;
      outline: none;
    }
    .input:focus{ border-color: #90CDF4; }

    .mini-row{
      display:flex;
      gap:10px;
      flex-wrap: wrap;
      justify-content: center;
      margin-top: 10px;
    }
    .pill{
      background:#EDF2F7;
      border-radius:999px;
      padding:8px 12px;
      font-weight: 600;
      color:#4A5568;
      user-select:none;
    }
  </style>
</head>

<body>
  <div id="app-container"></div>

  <script>
    const container = document.getElementById("app-container");

    function render(html){
      container.innerHTML = html;
    }

    /* =========================
       BIG, MOVING “SHAPE SORTER” STICKERS
       ========================= */

    function stickerSquarePeg(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg st-peg" viewBox="0 0 220 220" aria-label="Square peg trying to fit a square hole">
          <defs>
            <filter id="softShadow" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M40,85 C28,40 75,14 113,26 C150,38 192,20 196,68
                   C200,115 202,165 158,190 C114,214 60,206 40,170
                   C25,138 52,125 40,85 Z"
                fill="#FFE8D2"/>

          <g filter="url(#softShadow)">
            <rect x="122" y="92" width="74" height="74" rx="18" fill="#FFFFFF"/>
            <rect x="138" y="108" width="42" height="42" rx="10"
                  fill="none" stroke="#ED8936" stroke-width="8"/>
            <rect x="144" y="114" width="30" height="30" rx="8" fill="#F7FAFC"/>
          </g>

          <g class="spark tb">
            <path d="M188 80 l7 12 l-14 -5 l14 -5 l-7 12z" fill="#FFD166"/>
            <circle cx="199" cy="108" r="4" fill="#FFD166"/>
            <circle cx="182" cy="178" r="4" fill="#FFD166"/>
          </g>

          <g class="peg tb">
            <g class="armL tb">
              <path d="M74 130 C56 122, 53 98, 66 92" fill="none"
                    stroke="#2D3748" stroke-width="7" stroke-linecap="round"/>
              <circle cx="66" cy="92" r="6" fill="#2D3748"/>
            </g>
            <g class="armR tb">
              <path d="M120 128 C140 122, 142 98, 128 90" fill="none"
                    stroke="#2D3748" stroke-width="7" stroke-linecap="round"/>
              <circle cx="128" cy="90" r="6" fill="#2D3748"/>
            </g>

            <rect x="74" y="110" width="54" height="54" rx="15" fill="#48BB78" filter="url(#softShadow)"/>
            <rect x="80" y="116" width="42" height="42" rx="13" fill="#68D391" opacity="0.85"/>

            <circle cx="92" cy="136" r="5.6" fill="#1A202C"/>
            <circle cx="110" cy="136" r="5.6" fill="#1A202C"/>
            <path d="M94 150 Q101 158 108 150" fill="none" stroke="#1A202C"
                  stroke-width="5" stroke-linecap="round"/>

            <path d="M124 122 C131 131, 131 140, 124 144 C117 140, 117 131, 124 122 Z"
                  fill="#63B3ED" opacity="0.9"/>
          </g>
        </svg>
      </div>`;
    }

    function stickerToolsBuddy(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg st-tools" viewBox="0 0 220 220" aria-label="Helpful tools buddy">
          <defs>
            <filter id="softShadow2" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M42,88 C30,50 70,18 110,24 C150,30 190,30 195,70
                   C200,110 205,160 162,188 C118,215 60,202 40,170
                   C22,138 55,125 42,88 Z"
                fill="#E6FFFA"/>

          <g class="bulb tb" filter="url(#softShadow2)">
            <circle cx="170" cy="70" r="18" fill="#FFD166"/>
            <rect x="163" y="86" width="14" height="10" rx="4" fill="#718096"/>
            <path d="M158 66 Q170 50 182 66" fill="none" stroke="#FFD166" stroke-width="6" stroke-linecap="round"/>
          </g>

          <g class="buddy tb" filter="url(#softShadow2)">
            <rect x="68" y="90" width="84" height="84" rx="26" fill="#4299E1"/>
            <rect x="78" y="100" width="64" height="64" rx="22" fill="#63B3ED" opacity="0.85"/>

            <circle cx="95" cy="132" r="6" fill="#1A202C"/>
            <circle cx="125" cy="132" r="6" fill="#1A202C"/>
            <path d="M98 148 Q110 160 122 148" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>

            <path d="M150 118
                     c6 -6 16 -4 18 4
                     c-6 4 -10 8 -14 14
                     c-8 0 -12 -8 -4 -18z"
                  fill="#2D3748" opacity="0.9"/>
          </g>
        </svg>
      </div>`;
    }

    /* NEW: Ask for a clue (shape sorter + magnifier) */
    function stickerAskClue(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg st-ask" viewBox="0 0 220 220" aria-label="Ask for a clue">
          <defs>
            <filter id="softShadowA" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M44,86 C30,48 74,18 112,26 C150,34 192,30 194,70
                   C196,110 198,160 156,188 C114,216 62,204 44,172
                   C28,144 58,126 44,86 Z"
                fill="#EBF8FF"/>

          <!-- hole board -->
          <g filter="url(#softShadowA)">
            <rect x="128" y="104" width="70" height="70" rx="18" fill="#FFFFFF"/>
            <rect x="144" y="120" width="38" height="38" rx="10"
                  fill="none" stroke="#4299E1" stroke-width="8"/>
          </g>

          <!-- buddy peg -->
          <g class="buddy tb" filter="url(#softShadowA)">
            <rect x="58" y="104" width="70" height="70" rx="22" fill="#4299E1"/>
            <rect x="66" y="112" width="54" height="54" rx="20" fill="#63B3ED" opacity="0.9"/>
            <circle cx="82" cy="142" r="6" fill="#1A202C"/>
            <circle cx="104" cy="142" r="6" fill="#1A202C"/>
            <path d="M84 156 Q93 166 102 156" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
          </g>

          <!-- magnifier swoops in -->
          <g class="magnifier tb" filter="url(#softShadowA)">
            <circle cx="156" cy="86" r="18" fill="#FFD166"/>
            <circle cx="156" cy="86" r="10" fill="#FFF8F0" opacity="0.85"/>
            <rect x="170" y="96" width="30" height="10" rx="5" fill="#DD6B20" transform="rotate(35 170 96)"/>
          </g>

          <!-- spark “clue found!” -->
          <g class="spark tb">
            <path d="M166 66 l6 10 l-12 -4 l12 -4 l-6 10z" fill="#FFD166"/>
            <circle cx="188" cy="80" r="4" fill="#FFD166"/>
          </g>
        </svg>
      </div>`;
    }

    /* NEW: Recharge Power (square plug + battery fill) */
    function stickerRecharge(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg st-batt" viewBox="0 0 220 220" aria-label="Recharge power">
          <defs>
            <filter id="softShadowB" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M44,86 C30,48 74,18 112,26 C150,34 192,30 194,70
                   C196,110 198,160 156,188 C114,216 62,204 44,172
                   C28,144 58,126 44,86 Z"
                fill="#F0FFF4"/>

          <!-- socket / “hole” -->
          <g filter="url(#softShadowB)">
            <rect x="140" y="96" width="62" height="86" rx="20" fill="#FFFFFF"/>
            <rect x="154" y="114" width="34" height="50" rx="12" fill="#E6FFFA"/>
            <rect x="160" y="126" width="8" height="18" rx="4" fill="#2F855A"/>
            <rect x="174" y="126" width="8" height="18" rx="4" fill="#2F855A"/>
          </g>

          <!-- battery body -->
          <g filter="url(#softShadowB)">
            <rect x="54" y="104" width="96" height="72" rx="24" fill="#2F855A" opacity="0.92"/>
            <rect x="136" y="128" width="12" height="24" rx="6" fill="#2F855A"/>
            <rect x="64" y="114" width="76" height="52" rx="18" fill="#22543D" opacity="0.5"/>

            <!-- fill controlled by JS -->
            <rect id="batteryFill" x="64" y="114" width="10" height="52" rx="18" fill="#68D391"/>
          </g>

          <!-- bolt pops during charging -->
          <g class="bolt tb">
            <path d="M108 78 L94 104 H112 L102 128 L128 98 H110 Z" fill="#FFD166"/>
          </g>

          <!-- plug (moves during charging) -->
          <g class="plug tb" filter="url(#softShadowB)">
            <rect x="92" y="152" width="34" height="26" rx="10" fill="#68D391"/>
            <rect x="120" y="158" width="24" height="14" rx="7" fill="#48BB78"/>
            <rect x="142" y="156" width="10" height="6" rx="3" fill="#2F855A"/>
            <rect x="142" y="168" width="10" height="6" rx="3" fill="#2F855A"/>
          </g>

          <!-- cable -->
          <path d="M120 165 C142 170, 132 188, 152 188 C170 188, 174 176, 174 168"
                fill="none" stroke="#2F855A" stroke-width="6" stroke-linecap="round" opacity="0.65"/>
        </svg>
      </div>`;
    }

    /* NEW: Shake It Off (square buddy stuck + wiggle) */
    function stickerShake(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg st-shake" viewBox="0 0 220 220" aria-label="Shake it off">
          <defs>
            <filter id="softShadowC" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M44,88 C32,50 76,18 114,26 C152,34 192,30 194,70
                   C196,110 198,160 156,188 C114,216 62,204 44,172
                   C28,144 58,126 44,88 Z"
                fill="#FAF5FF"/>

          <!-- hole board -->
          <g filter="url(#softShadowC)">
            <rect x="132" y="106" width="68" height="68" rx="18" fill="#FFFFFF"/>
            <rect x="146" y="120" width="40" height="40" rx="10" fill="none" stroke="#9F7AEA" stroke-width="8"/>
          </g>

          <!-- buddy tries to wiggle out -->
          <g class="buddy tb" filter="url(#softShadowC)">
            <rect x="62" y="104" width="86" height="86" rx="28" fill="#9F7AEA"/>
            <rect x="72" y="114" width="66" height="66" rx="24" fill="#D6BCFA" opacity="0.9"/>

            <circle cx="92" cy="148" r="6" fill="#1A202C"/>
            <circle cx="118" cy="148" r="6" fill="#1A202C"/>
            <path d="M96 164 Q105 176 114 164" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>

            <path d="M62 148 C46 146 46 124 62 122" fill="none" stroke="#2D3748" stroke-width="7" stroke-linecap="round"/>
            <path d="M148 148 C164 146 164 124 148 122" fill="none" stroke="#2D3748" stroke-width="7" stroke-linecap="round"/>

            <!-- motion lines -->
            <path d="M40 140 L56 130" stroke="#805AD5" stroke-width="6" stroke-linecap="round" opacity="0.55"/>
            <path d="M180 140 L164 130" stroke="#805AD5" stroke-width="6" stroke-linecap="round" opacity="0.55"/>
          </g>
        </svg>
      </div>`;
    }

    /* Existing reaction stickers (kept simple + fun) */
    function stickerGiveUp(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg" viewBox="0 0 220 220" aria-label="Giving up">
          <defs>
            <filter id="softShadowG" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>
          <path d="M45,78 C32,40 78,18 112,26 C146,34 190,32 194,70
                   C198,108 198,162 160,190 C122,218 62,204 44,172
                   C28,144 58,120 45,78 Z"
                fill="#FFF5F5"/>
          <g filter="url(#softShadowG)">
            <rect x="68" y="90" width="84" height="84" rx="26" fill="#A0AEC0"/>
            <rect x="78" y="100" width="64" height="64" rx="22" fill="#CBD5E0"/>
            <path d="M92 132 Q98 126 104 132" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <path d="M118 132 Q124 126 130 132" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <path d="M98 150 L122 150" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <path d="M160 116 L160 170" stroke="#718096" stroke-width="7" stroke-linecap="round"/>
            <path d="M160 118 Q188 124 160 138" fill="#FEB2B2" opacity="0.95"/>
          </g>
        </svg>
      </div>`;
    }

    function stickerDestroy(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg" viewBox="0 0 220 220" aria-label="Destroying work">
          <defs>
            <filter id="softShadowD" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>
          <path d="M40,90 C28,52 70,18 112,26 C154,34 195,34 198,74
                   C201,114 200,162 158,190 C116,218 60,205 40,175
                   C25,146 53,126 40,90 Z"
                fill="#FFF8E1"/>
          <g filter="url(#softShadowD)">
            <rect x="68" y="90" width="84" height="84" rx="26" fill="#ED8936"/>
            <rect x="78" y="100" width="64" height="64" rx="22" fill="#F6AD55"/>
            <path d="M88 128 L104 120" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <path d="M132 128 L116 120" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <circle cx="95" cy="134" r="6" fill="#1A202C"/>
            <circle cx="125" cy="134" r="6" fill="#1A202C"/>
            <path d="M98 152 Q110 144 122 152" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <path d="M168 140 c-6 -10 4 -22 16 -20 c10 2 14 12 9 20 c-4 8 -17 12 -25 0z"
                  fill="#F7FAFC" opacity="0.95"/>
          </g>
        </svg>
      </div>`;
    }

    function stickerMeanWords(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg" viewBox="0 0 220 220" aria-label="Mean words">
          <defs>
            <filter id="softShadowM" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M40,88 C30,52 70,16 110,24 C150,32 190,32 194,72
                   C198,112 202,162 160,190 C118,218 62,204 42,172
                   C26,144 54,126 40,88 Z"
                fill="#EDF2F7"/>

          <g filter="url(#softShadowM)">
            <rect x="56" y="110" width="78" height="78" rx="26" fill="#805AD5"/>
            <rect x="66" y="120" width="58" height="58" rx="22" fill="#B794F4" opacity="0.85"/>
            <circle cx="84" cy="152" r="6" fill="#1A202C"/>
            <circle cx="110" cy="152" r="6" fill="#1A202C"/>
            <path d="M88 166 Q97 156 106 166" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
          </g>

          <g filter="url(#softShadowM)">
            <path d="M140 62 c26 0 44 16 44 34 c0 18 -18 34 -44 34
                     c-6 0 -12 -1 -18 -3 l-14 9 4 -16
                     c-10 -7 -16 -15 -16 -24 c0 -18 18 -34 44 -34z"
                  fill="#FEB2B2"/>
            <path d="M122 86 C132 80, 142 92, 152 86 C162 80, 172 92, 182 86"
                  fill="none" stroke="#C53030" stroke-width="6" stroke-linecap="round"/>
          </g>
        </svg>
      </div>`;
    }

    function stickerWhining(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg" viewBox="0 0 220 220" aria-label="Whining">
          <defs>
            <filter id="softShadowW" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M40,90 C28,55 70,18 110,26 C150,34 190,34 194,74
                   C198,114 202,162 160,190 C118,218 62,204 42,172
                   C26,144 54,126 40,90 Z"
                fill="#E6FFFA"/>

          <g filter="url(#softShadowW)">
            <rect x="68" y="90" width="84" height="84" rx="26" fill="#48BB78"/>
            <rect x="78" y="100" width="64" height="64" rx="22" fill="#9AE6B4" opacity="0.95"/>
            <circle cx="95" cy="134" r="6" fill="#1A202C"/>
            <circle cx="125" cy="134" r="6" fill="#1A202C"/>
            <path d="M98 154 Q110 146 122 154" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
            <path d="M140 128 C148 140, 148 154, 140 160 C132 154, 132 140, 140 128 Z"
                  fill="#63B3ED" opacity="0.95"/>
          </g>
        </svg>
      </div>`;
    }

    function stickerBrainFog(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg" viewBox="0 0 220 220" aria-label="Brain fog">
          <defs>
            <filter id="softShadowF" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M46,82 C34,44 82,20 116,30 C150,40 192,32 194,72
                   C196,112 196,160 156,188 C116,216 62,202 46,172
                   C30,144 58,120 46,82 Z"
                fill="#F7FAFC"/>

          <g filter="url(#softShadowF)" class="tb" style="animation: floaty 2.4s infinite ease-in-out;">
            <path d="M70 130 c-14 0 -26 -10 -26 -24 c0 -12 8 -22 20 -24
                     c4 -18 22 -30 40 -24 c10 -10 28 -10 38 2
                     c14 0 26 12 26 26 c0 16 -12 26 -26 26H70z"
                  fill="#CBD5E0"/>
            <circle cx="92" cy="118" r="5.8" fill="#1A202C"/>
            <circle cx="124" cy="118" r="5.8" fill="#1A202C"/>
            <path d="M98 134 Q108 126 118 134" fill="none" stroke="#1A202C" stroke-width="6" stroke-linecap="round"/>
          </g>
        </svg>
      </div>`;
    }

    function stickerTimeWasted(){
      return `
      <div class="sticker-wrap">
        <svg class="sticker-svg" viewBox="0 0 220 220" aria-label="Time wasted">
          <defs>
            <filter id="softShadowT" x="-20%" y="-20%" width="140%" height="140%">
              <feDropShadow dx="0" dy="7" stdDeviation="7" flood-color="rgba(0,0,0,0.14)"/>
            </filter>
          </defs>

          <path d="M44,82 C32,44 82,20 116,30 C150,40 192,32 194,72
                   C196,112 196,160 156,188 C116,216 62,202 44,172
                   C28,144 58,120 44,82 Z"
                fill="#FFF5F5"/>

          <g filter="url(#softShadowT)" class="tb" style="animation: wiggle 1.4s infinite ease-in-out;">
            <rect x="80" y="54" width="60" height="18" rx="8" fill="#718096"/>
            <rect x="80" y="148" width="60" height="18" rx="8" fill="#718096"/>
            <path d="M92 72 c0 20 18 20 18 38 c0 18 -18 18 -18 38
                     h56 c0 -20 -18 -20 -18 -38 c0 -18 18 -18 18 -38H92z"
                  fill="#FED7D7"/>
            <path d="M110 110 L110 122" stroke="#ED8936" stroke-width="8" stroke-linecap="round"/>
            <circle cx="110" cy="128" r="6" fill="#ED8936"/>
          </g>
        </svg>
      </div>`;
    }

    /* =========================
       VIEWS
       ========================= */

    function showHome(){
      render(`
        <h1 class="title">Understanding Frustration</h1>
        <p class="sub">Frustration feels like a “square peg” moment. Let’s untangle it.</p>

        <div class="grid-2">
          <div class="white-card">
            ${stickerSquarePeg()}
            <div class="card-title">The Big Tangle</div>
            <p class="card-desc">“I’m trying… but it’s not fitting!”</p>
            <button class="btn btn-orange" onclick="showReactions()">See Reactions</button>
          </div>

          <div class="white-card">
            ${stickerToolsBuddy()}
            <div class="card-title">Untangle Tools</div>
            <p class="card-desc">Small science-backed moves that calm the body and brain.</p>
            <button class="btn btn-green" onclick="showSolutions()">Show Solutions</button>
          </div>
        </div>

        <div style="text-align:center; margin-top:28px;">
          <a class="menu-link" href="index.html">← Back to Menu</a>
        </div>
      `);
    }

    function showReactions(){
      render(`
        <button class="btn-back" onclick="showHome()">← Back</button>

        <h1 class="title orange-title">How Do We Act?</h1>
        <p class="sub" style="color: var(--orange1); font-weight:600;">When frustration rises, these reactions can pop out.</p>

        <div class="grid-2">
          <div class="white-card">
            ${stickerGiveUp()}
            <div class="card-title">Giving Up</div>
            <p class="card-desc">“I’m done!”</p>
          </div>

          <div class="white-card">
            ${stickerDestroy()}
            <div class="card-title">Destroying Work</div>
            <p class="card-desc">Rip, smash, toss…</p>
          </div>

          <div class="white-card">
            ${stickerMeanWords()}
            <div class="card-title">Mean Words</div>
            <p class="card-desc">Blurt out “hot” words.</p>
          </div>

          <div class="white-card">
            ${stickerWhining()}
            <div class="card-title">Whining</div>
            <p class="card-desc">“It’s not fair…”</p>
          </div>
        </div>

        <div class="white-card" style="margin-top: 26px; border-bottom-color: var(--orange1);">
          <p style="font-weight:600; font-size:20px; color: var(--orange2); margin:0 0 8px;">Do these help the peg fit?</p>
          <button class="btn btn-orange" style="width:auto; padding:12px 18px;" onclick="showConsequences()">See The Result</button>
        </div>
      `);
    }

    function showConsequences(){
      render(`
        <button class="btn-back" onclick="showReactions()">← Back</button>

        <h1 class="title orange-title">Still Stuck…</h1>
        <p class="sub">Big reactions usually make the puzzle harder.</p>

        <div class="grid-2">
          <div class="white-card">
            ${stickerBrainFog()}
            <div class="card-title">Brain Fog</div>
            <p class="card-desc">Thinking feels cloudy.</p>
          </div>

          <div class="white-card">
            ${stickerTimeWasted()}
            <div class="card-title">Time Wasted</div>
            <p class="card-desc">The clock keeps dripping away.</p>
          </div>
        </div>

        <div class="white-card" style="margin-top: 26px; border-bottom-color: var(--green1);">
          <p style="font-weight:600; font-size:20px; color: var(--green2); margin:0 0 8px;">Let’s use tools instead.</p>
          <button class="btn btn-green" style="width:auto; padding:12px 18px;" onclick="showSolutions()">Go To Solutions</button>
        </div>
      `);
    }

    function showSolutions(){
      render(`
        <button class="btn-back" onclick="showHome()">← Back to Start</button>

        <h1 class="title green-title">Cooling-Down Tools</h1>
        <p class="sub">These help your body calm down first, then your brain can solve the puzzle.</p>

        <div style="display:flex; flex-direction:column; gap: 26px; margin-top: 16px;">

          <!-- 1) Ask for a clue -->
          <div class="white-card" style="text-align:left; border-bottom-color: var(--blue1);">
            <div style="text-align:center;">${stickerAskClue()}</div>
            <div class="card-title" style="text-align:center; color: var(--blue1);">Ask for a Clue</div>
            <p class="card-desc" style="text-align:center;">A tiny hint reduces stress and unlocks the next step.</p>

            <div id="helpBubble" class="practice-bubble">“Excuse me… can you give me one small hint?”</div>
            <button class="btn btn-blue" onclick="toggleHelpBubble()">Practice Asking</button>
          </div>

          <!-- 2) Recharge -->
          <div class="white-card" id="chargeCard" style="text-align:left; border-bottom-color: var(--green1);">
            <div style="text-align:center;">${stickerRecharge()}</div>
            <div class="card-title" style="text-align:center; color: var(--green1);">Recharge Power</div>
            <p class="card-desc" style="text-align:center;">Short breaks help the brain reset and try again.</p>

            <div id="chargeTimer" style="text-align:center; font-size:30px; font-weight:600; color: var(--green2); margin-top:8px;"></div>
            <button class="btn btn-green" onclick="startCharge()">Start Recharge (10s)</button>
          </div>

          <!-- 3) Breathing -->
          <div class="white-card" style="text-align:left; border-bottom-color: var(--orange1);">
            <div style="text-align:center;">
              <div id="breathCircle"
                style="width:110px; height:110px; background: linear-gradient(135deg, var(--orange1), #F6AD55);
                       border-radius: 999px; display:flex; align-items:center; justify-content:center;
                       color:#fff; font-weight:600; margin: 6px auto 14px; transition: transform 4s;
                       box-shadow: 0 12px 24px rgba(237,137,54,0.32);"
              >In</div>
            </div>

            <div class="card-title" style="text-align:center; color: var(--orange1);">Slow Breathing</div>
            <p class="card-desc" style="text-align:center;">Slower breathing tells the body “I’m safe.”</p>

            <button class="btn btn-orange" onclick="toggleBreath()">Start Breathing</button>
          </div>

          <!-- 4) Shake it off -->
          <div class="white-card" id="shakeCard" style="text-align:left; border-bottom-color: var(--purple1);">
            <div style="text-align:center;" id="shakeSticker">${stickerShake()}</div>
            <div class="card-title" style="text-align:center; color: var(--purple2);">Shake It Off</div>
            <p class="card-desc" style="text-align:center;">Quick movement helps the “stuck energy” leave the body.</p>

            <button class="btn btn-purple" onclick="shakeIt()">Wiggle & Shake!</button>
          </div>

          <!-- 5) Name the feeling (affect labeling) -->
          <div class="white-card" style="text-align:left; border-bottom-color: var(--teal1);">
            <div style="text-align:center;">${stickerAskClue()}</div>
            <div class="card-title" style="text-align:center; color: var(--teal2);">Name the Feeling</div>
            <p class="card-desc" style="text-align:center;">Putting a name on it helps the brain calm and organize.</p>

            <input id="feelInput" class="input" placeholder="I feel frustrated because…" />
            <div id="feelEcho" class="tiny-box hidden"></div>

            <button class="btn btn-teal" onclick="saveFeeling()">Lock It In</button>
          </div>

          <!-- 6) Tiny steps (reduce overwhelm) -->
          <div class="white-card" style="text-align:left; border-bottom-color: var(--blue1);">
            <div style="text-align:center;">${stickerSquarePeg()}</div>
            <div class="card-title" style="text-align:center; color: var(--blue1);">Make It Tiny</div>
            <p class="card-desc" style="text-align:center;">Small steps feel doable and stop the panic spiral.</p>

            <div id="tinySteps" class="tiny-box hidden">
              <div style="font-weight:700; margin-bottom:6px;">Try this:</div>
              <div>1) What is the first tiny step?</div>
              <div>2) What tool do I need?</div>
              <div>3) What can I do for 60 seconds?</div>
            </div>

            <button class="btn btn-blue" onclick="toggleTinySteps()">Show Tiny Steps</button>
          </div>

          <!-- 7) Squeeze & release (muscle relaxation) -->
          <div class="white-card" style="text-align:left; border-bottom-color: var(--red1);">
            <div style="text-align:center;">${stickerShake()}</div>
            <div class="card-title" style="text-align:center; color: var(--red2);">Squeeze & Release</div>
            <p class="card-desc" style="text-align:center;">Tense muscles for 5 seconds, then relax. Your body “lets go.”</p>

            <div class="mini-row">
              <div class="pill" id="squeezeText">Ready?</div>
            </div>

            <button class="btn btn-red" onclick="startSqueeze()">Start (5 + 5)</button>
          </div>

          <!-- 8) 5 senses grounding -->
          <div class="white-card" style="text-align:left; border-bottom-color: var(--teal1);">
            <div style="text-align:center;">${stickerToolsBuddy()}</div>
            <div class="card-title" style="text-align:center; color: var(--teal2);">5 Senses Reset</div>
            <p class="card-desc" style="text-align:center;">Grounding pulls your brain out of the “storm.”</p>

            <div id="sensePrompt" class="tiny-box">
              Press the button to get a quick mission.
            </div>

            <button class="btn btn-teal" onclick="nextSense()">Give Me a Mission</button>
          </div>

        </div>
      `);
    }

    /* =========================
       INTERACTION LOGIC
       ========================= */

    function toggleHelpBubble(){
      const b = document.getElementById("helpBubble");
      if(!b) return;
      b.style.display = (b.style.display === "block") ? "none" : "block";
    }

    let chargeInterval = null;

    function startCharge(){
      const timer = document.getElementById("chargeTimer");
      const fill  = document.getElementById("batteryFill");
      const card  = document.getElementById("chargeCard");
      if(!timer || !fill || !card) return;

      if(chargeInterval) clearInterval(chargeInterval);

      card.classList.add("charging");

      let t = 10;
      timer.textContent = "Recharging…";
      fill.setAttribute("width", "10");

      chargeInterval = setInterval(() => {
        t--;
        timer.textContent = t > 0 ? `${t}s` : `Fully Charged!`;
        const w = 10 + ((10 - t) / 10) * 66; // 10 -> 76
        fill.setAttribute("width", String(Math.max(10, Math.min(76, w))));
        if(t <= 0){
          clearInterval(chargeInterval);
          chargeInterval = null;
          card.classList.remove("charging");
        }
      }, 1000);
    }

    let breathInterval = null;
    function toggleBreath(){
      const circle = document.getElementById("breathCircle");
      if(!circle) return;

      const running = circle.dataset.running === "1";

      if(running){
        circle.dataset.running = "0";
        circle.style.transform = "scale(1)";
        circle.textContent = "In";
        if(breathInterval) clearInterval(breathInterval);
        breathInterval = null;
        return;
      }

      circle.dataset.running = "1";
      circle.textContent = "In";
      circle.style.transform = "scale(1.45)";

      breathInterval = setInterval(() => {
        if(circle.textContent === "In"){
          circle.textContent = "Out";
          circle.style.transform = "scale(1)";
        } else {
          circle.textContent = "In";
          circle.style.transform = "scale(1.45)";
        }
      }, 4000);
    }

    function shakeIt(){
      const card = document.getElementById("shakeCard");
      if(!card) return;

      card.classList.add("shakingCard");
      card.classList.add("wiggling");

      setTimeout(() => {
        card.classList.remove("shakingCard");
        card.classList.remove("wiggling");
      }, 2000);
    }

    function saveFeeling(){
      const input = document.getElementById("feelInput");
      const echo  = document.getElementById("feelEcho");
      if(!input || !echo) return;

      const text = input.value.trim();
      if(!text){
        echo.textContent = "Try writing one reason, even small.";
      } else {
        echo.textContent = `Good job. You noticed it: “${text}”`;
      }
      echo.classList.remove("hidden");
    }

    function toggleTinySteps(){
      const box = document.getElementById("tinySteps");
      if(!box) return;
      box.classList.toggle("hidden");
    }

    let squeezeInterval = null;
    function startSqueeze(){
      const el = document.getElementById("squeezeText");
      if(!el) return;

      if(squeezeInterval) clearInterval(squeezeInterval);

      let phase = "SQUEEZE";
      let t = 5;
      el.textContent = `SQUEEZE hands (5)…`;

      squeezeInterval = setInterval(() => {
        t--;
        if(t > 0){
          el.textContent = `${phase} (${t})…`;
          return;
        }

        if(phase === "SQUEEZE"){
          phase = "RELEASE";
          t = 5;
          el.textContent = `RELEASE (5)…`;
          return;
        }

        clearInterval(squeezeInterval);
        squeezeInterval = null;
        el.textContent = "Nice! Your body just let go.";
      }, 1000);
    }

    const senseMissions = [
      "Look for 5 things you can see.",
      "Touch 4 things (shirt, chair, hair, desk).",
      "Listen for 3 sounds (fan, birds, voices).",
      "Find 2 smells (soap, food, air).",
      "Taste 1 thing (water counts)."
    ];
    let senseIndex = 0;
    function nextSense(){
      const box = document.getElementById("sensePrompt");
      if(!box) return;
      box.textContent = senseMissions[senseIndex % senseMissions.length];
      senseIndex++;
    }

    showHome();
  </script>
</body>
</html>
