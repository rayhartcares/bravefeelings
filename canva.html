<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Understanding Anger</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@400;600&display=swap" rel="stylesheet">
  <style>
    /* --- THEME & BASE --- */
    body {
      margin: 0; padding: 0; background-color: #FFF8F0;
      font-family: 'Fredoka', cursive, sans-serif; color: #2D3748;
      display: flex; justify-content: center; min-height: 100vh; overflow-x: hidden;
    }
    #app-container { width: 100%; max-width: 800px; padding: 40px 20px; position: relative; }

    /* --- ROBUST CARD STYLES --- */
    .white-card {
      background: white; border-radius: 24px; padding: 30px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.05); text-align: center;
      margin-bottom: 24px; border-bottom: 6px solid #EDF2F7;
      transition: all 0.3s ease; position: relative; overflow: hidden;
    }
    /* Make cards feel alive on hover */
    .white-card:hover { transform: translateY(-8px); box-shadow: 0 15px 30px rgba(0,0,0,0.1); }
    .volcano-card:hover { border-bottom-color: #E53E3E; }
    .cool-card:hover { border-bottom-color: #48BB78; }

    /* --- ANIMATIONS --- */
    @keyframes rumble { 0% { transform: translate(0, 0) rotate(0deg); } 25% { transform: translate(-2px, 2px) rotate(-1deg); } 50% { transform: translate(2px, -2px) rotate(1deg); } 75% { transform: translate(-2px, -2px) rotate(-1deg); } 100% { transform: translate(0, 0) rotate(0deg); } }
    @keyframes throb-red { 0%, 100% { transform: scale(1); filter: drop-shadow(0 0 0 rgba(229, 62, 62, 0)); } 50% { transform: scale(1.1); filter: drop-shadow(0 0 15px rgba(229, 62, 62, 0.6)); } }
    @keyframes float-calm { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    @keyframes particle-explode { 0% { transform: translate(0, 0) scale(1); opacity: 1; } 100% { transform: translate(var(--tx), var(--ty)) scale(0); opacity: 0; } }

    /* Applied Animations */
    .icon-volcano { display: inline-block; animation: rumble 0.5s infinite linear; }
    .volcano-card:hover .icon-volcano { filter: drop-shadow(0 0 20px #E53E3E); }
    .icon-throb { display: inline-block; animation: throb-red 1.5s infinite ease-in-out; color: #E53E3E; }
    .icon-float { display: inline-block; animation: float-calm 3s infinite ease-in-out; }
    
    /* Particle Effects */
    .particle { position: absolute; width: 15px; height: 15px; border-radius: 50%; pointer-events: none; z-index: 99; }

    /* --- TYPOGRAPHY & BUTTONS --- */
    .title { font-size: 36px; font-weight: bold; text-align: center; margin-bottom: 10px; }
    .red-title { color: #E53E3E; text-shadow: 2px 2px 0px rgba(229, 62, 62, 0.1); }
    .green-title { color: #48BB78; text-shadow: 2px 2px 0px rgba(72, 187, 120, 0.1); }
    .icon-huge { font-size: 70px; margin-bottom: 15px; }
    .card-title { font-size: 22px; font-weight: bold; margin-bottom: 8px; }
    .card-desc { font-size: 16px; color: #4A5568; line-height: 1.6; margin-bottom: 20px; }
    .btn { padding: 14px 28px; border-radius: 16px; font-weight: bold; font-size: 18px; border: none; cursor: pointer; color: white; transition: all 0.2s; width: 100%; box-shadow: 0 4px 6px rgba(0,0,0,0.1); }
    .btn:hover { transform: scale(1.05); box-shadow: 0 8px 15px rgba(0,0,0,0.15); }
    .btn:active { transform: scale(0.95); }
    .btn-red { background: linear-gradient(135deg, #E53E3E, #C53030); }
    .btn-green { background: linear-gradient(135deg, #48BB78, #38A169); }
    .btn-back { background: white; border: 2px solid #CBD5E0; color: #4A5568; padding: 8px 16px; border-radius: 12px; font-weight: bold; cursor: pointer; margin-bottom: 20px; font-family: inherit; }
    .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 25px; }
    @media (max-width: 600px) { .grid-2 { grid-template-columns: 1fr; } }
  </style>
</head>
<body>

  <div id="app-container">
    </div>

  <script>
    const container = document.getElementById('app-container');

    // --- PARTICLE EXPLOSION SYSTEM ---
    function createExplosion(x, y, color) {
      for (let i = 0; i < 30; i++) {
        const particle = document.createElement('div');
        particle.classList.add('particle');
        particle.style.backgroundColor = color;
        particle.style.left = x + 'px';
        particle.style.top = y + 'px';
        // Random direction and distance
        const tx = (Math.random() - 0.5) * 400;
        const ty = (Math.random() - 0.5) * 400;
        particle.style.setProperty('--tx', `${tx}px`);
        particle.style.setProperty('--ty', `${ty}px`);
        // Random animation speed
        particle.style.animation = `particle-explode ${0.5 + Math.random() * 1}s ease-out forwards`;
        document.body.appendChild(particle);
        // Clean up
        setTimeout(() => particle.remove(), 1500);
      }
    }

    // --- VIEW 1: HOME (Active Volcano) ---
    function showHome() {
      container.innerHTML = `
        <h1 class="title">Understanding Anger</h1>
        <p style="text-align: center; color: #4A5568; margin-bottom: 40px; font-size: 18px;">Anger is powerful energy. Let's learn to channel it!</p>
        
        <div class="grid-2">
          <div class="white-card volcano-card">
            <span class="icon-huge icon-volcano">üåã</span>
            <div class="card-title">The Anger Volcano</div>
            <p class="card-desc">Feeling ready to explode?</p>
            <button id="explodeBtn" class="btn btn-red">See the Explosion</button>
          </div>
          <div class="white-card cool-card">
            <span class="icon-huge icon-float">üßä</span>
            <div class="card-title">Cool Down Tools</div>
            <p class="card-desc">Smart ways to chill out.</p>
            <button onclick="showSolutions()" class="btn btn-green">Show Solutions</button>
          </div>
        </div>
        <div style="text-align: center; margin-top: 30px;">
           <a href="index.html" style="color: #A0AEC0; text-decoration: none; font-weight: bold;">‚Üê Back to Main Menu</a>
        </div>
      `;
      // Trigger explosion on click right before changing page
      document.getElementById('explodeBtn').addEventListener('click', (e) => {
          createExplosion(e.clientX, e.clientY, '#E53E3E'); // Red explosion
          setTimeout(showNegative, 300); // Delay slightly to see explosion start
      });
    }

    // --- VIEW 2: NEGATIVE (Explosive & Throbbing) ---
    function showNegative() {
      container.innerHTML = `
        <button onclick="showHome()" class="btn-back">‚Üê Back</button>
        <h1 class="title red-title">When Anger Explodes! üí•</h1>
        
        <div class="grid-2" style="margin-top: 30px;">
          <div class="white-card" style="text-align: left; border-bottom-color: #E53E3E;">
            <span class="icon-huge icon-throb">üß†</span>
            <div class="card-title red-title">Brain Freeze</div>
            <p class="card-desc">Your thinking brain shuts off. You can't make good choices.</p>
          </div>
          <div class="white-card" style="text-align: left; border-bottom-color: #E53E3E;">
            <span class="icon-huge icon-throb">üíî</span>
            <div class="card-title red-title">Words Hurt</div>
            <p class="card-desc">Explosive words can break friendships and hurt feelings.</p>
          </div>
          <div class="white-card" style="text-align: left; border-bottom-color: #E53E3E;">
            <span class="icon-huge icon-throb">üî•</span>
            <div class="card-title red-title">Body Overheat</div>
            <p class="card-desc">Heart pounds fast, fists clench, muscles get super tight.</p>
          </div>
          <div class="white-card" style="text-align: left; border-bottom-color: #E53E3E;">
            <span class="icon-huge icon-throb">üò¢</span>
            <div class="card-title red-title">The Aftermath</div>
            <p class="card-desc">Explosions usually end in guilt, sadness, or trouble.</p>
          </div>
        </div>
        
        <div class="white-card" style="margin-top: 30px; background: #F0FFF4; border-bottom-color: #48BB78;">
           <p style="font-weight: bold; font-size: 20px; margin-bottom: 15px; color: #2F855A;">üí° Good News! You can control the volcano!</p>
           <button id="coolBtn" class="btn btn-green" style="width: auto;">Learn Cool Down Powers</button>
        </div>
      `;
      document.getElementById('coolBtn').addEventListener('click', (e) => {
          createExplosion(e.clientX, e.clientY, '#48BB78'); // Green explosion
          setTimeout(showSolutions, 300);
      });
    }

    // --- VIEW 3: SOLUTIONS (Calm & Floating) ---
    function showSolutions() {
      container.innerHTML = `
        <button onclick="showHome()" class="btn-back">‚Üê Back</button>
        <h1 class="title green-title">Your Cool Down Powers üõ°Ô∏è</h1>

        <div style="display: flex; flex-direction: column; gap: 20px; margin-top: 30px;">
          
          <div class="white-card" style="text-align: left; border-bottom-color: #48BB78;">
            <span class="icon-huge icon-float">ü´Å</span>
            <div class="card-title green-title">Super Slow Breathing</div>
            <p class="card-desc">Activates your body's built-in "calm down" switch.</p>
            <div style="text-align: center;">
               <div id="breath-circle" style="width: 120px; height: 120px; background: linear-gradient(135deg, #48BB78, #81E6D9); border-radius: 50%; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 20px; margin: 0 auto 20px auto; transition: transform 4s, background 4s; box-shadow: 0 10px 20px rgba(72, 187, 120, 0.3);">Breathe</div>
               <button onclick="toggleBreath()" class="btn btn-green" style="width: auto;">Activate Power</button>
            </div>
          </div>

          <div class="white-card" style="text-align: left; border-bottom-color: #ED8936;">
            <span class="icon-huge icon-float" style="animation-delay: 0.5s;">üèÉ</span>
            <div class="card-title" style="color: #ED8936;">Energy Release</div>
            <p class="card-desc">Shake off the angry energy before it explodes. Jump, run, dance!</p>
            <div style="text-align: center;">
               <div id="move-timer" style="font-size: 50px; font-weight: bold; color: #ED8936; height: 60px; text-shadow: 2px 2px 0 rgba(0,0,0,0.1);"></div>
               <button onclick="startMove()" class="btn" style="background: linear-gradient(135deg, #ED8936, #C05621); width: auto;">Start 10s Burst</button>
            </div>
          </div>

          <div class="white-card" style="text-align: left; border-bottom-color: #4299E1;">
             <span class="icon-huge icon-float" style="animation-delay: 1s;">üßä</span>
             <div class="card-title" style="color: #4299E1;">The Ice Shock</div>
             <p class="card-desc">Cold instantly resets your nervous system. A real "brain freeze" for anger!</p>
             <div style="text-align: center;">
                <div id="ice-cube" onclick="clickIce()" style="font-size: 90px; cursor: pointer; transition: all 0.5s; display: inline-block;">üßä</div>
                <p id="ice-msg" style="color: #3182CE; font-weight: bold; height: 30px; font-size: 18px;"></p>
                <button onclick="clickIce()" class="btn" style="background: linear-gradient(135deg, #4299E1, #2B6CB0); width: auto;">Apply Ice</button>
             </div>
          </div>

          <div class="white-card" style="text-align: left; border-bottom-color: #ECC94B;">
             <span class="icon-huge icon-float" style="animation-delay: 1.5s;">üó£Ô∏è</span>
             <div class="card-title" style="color: #D69E2E;">Speak Your Power</div>
             <p class="card-desc">Don't explode, express! Use your words instead of your fists.</p>
             <div style="background-color: #FFFFF0; padding: 20px; border-radius: 16px; border: 2px dashed #ECC94B;">
                <p style="font-weight: bold; color: #D69E2E; font-size: 18px;">Say: "I feel ANGRY when [what happened]."</p>
             </div>
          </div>

          <div class="white-card" style="text-align: left; border-bottom-color: #A0AEC0;">
             <span class="icon-huge icon-float" style="animation-delay: 2s;">‚è±Ô∏è</span>
             <div class="card-title" style="color: #4A5568;">Tactical Retreat (Time-Out)</div>
             <p class="card-desc">Walk away to recharge your shields. Come back when you are in control.</p>
             <div style="text-align: center;">
                <div id="timeout-timer" style="font-size: 40px; font-weight: bold; color: #4A5568; border: 5px solid #CBD5E0; width: 120px; height: 120px; border-radius: 50%; display: flex; align-items: center; justify-content: center; margin: 0 auto 20px auto; background: #F7FAFC;">5:00</div>
                <button onclick="startTimeOut()" class="btn" style="background: linear-gradient(135deg, #A0AEC0, #718096); width: auto;">Start Timer</button>
             </div>
          </div>

        </div>
      `;
    }

    // --- INTERACTION LOGIC ---
    let breathInterval;
    function toggleBreath() {
       const circle = document.getElementById('breath-circle');
       if(circle.style.transform.includes("scale(1.5)")) {
          circle.style.transform = "scale(1)"; circle.innerText = "Breathe"; circle.style.background = "linear-gradient(135deg, #48BB78, #81E6D9)"; clearInterval(breathInterval);
       } else {
          circle.innerText = "In..."; circle.style.transform = "scale(1.5)"; circle.style.background = "linear-gradient(135deg, #48BB78, #E53E3E)";
          breathInterval = setInterval(() => {
             if(circle.innerText === "In...") { circle.innerText = "Out..."; circle.style.transform = "scale(1)"; circle.style.background = "linear-gradient(135deg, #48BB78, #81E6D9)"; } 
             else { circle.innerText = "In..."; circle.style.transform = "scale(1.5)"; circle.style.background = "linear-gradient(135deg, #48BB78, #E53E3E)"; }
          }, 4000);
       }
    }

    function startMove() {
       let t = 10; const timer = document.getElementById('move-timer'); timer.innerText = t;
       const i = setInterval(() => { t--; timer.innerText = t; if(t<=0) { clearInterval(i); timer.innerText = "Great Job! üéâ"; } }, 1000);
    }

    function clickIce() {
       const ice = document.getElementById('ice-cube'); const msg = document.getElementById('ice-msg');
       ice.style.transform = "scale(0.6) rotate(25deg) translateY(20px)"; ice.style.filter = "blur(2px)"; msg.innerText = "ü•∂ Brrr! Dive reflex activated!";
       createExplosion(ice.getBoundingClientRect().left + 40, ice.getBoundingClientRect().top + 40, '#4299E1'); // Blue explosion
       setTimeout(() => { ice.style.transform = "scale(1) rotate(0deg) translateY(0)"; ice.style.filter = "none"; msg.innerText = ""; }, 2000);
    }

    function startTimeOut() {
        let t = 300; const timer = document.getElementById('timeout-timer');
        const i = setInterval(() => {
            t--; const m = Math.floor(t / 60); const s = t % 60;
            timer.innerText = `${m}:${s < 10 ? '0' : ''}${s}`;
            if(t<=0) { clearInterval(i); timer.innerText = "Done!"; timer.style.borderColor = "#48BB78"; timer.style.color = "#48BB78"; }
        }, 1000);
    }

    // Initialize
    showHome();
  </script>
</body>
</html>
